import*as e from"node:crypto";const t=BigInt(2**32-1),n=BigInt(32);function r(e,r=!1){return r?{h:Number(e&t),l:Number(e>>n&t)}:{h:0|Number(e>>n&t),l:0|Number(e&t)}}const s=e&&"object"==typeof e&&"webcrypto"in e?e.webcrypto:e&&"object"==typeof e&&"randomBytes"in e?e:void 0;function i(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function o(e,...t){if(!((n=e)instanceof Uint8Array||ArrayBuffer.isView(n)&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */
var n;if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function a(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function c(e,t){o(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function u(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function f(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function d(e,t){return e<<32-t|e>>>t}function l(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}const h=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])()?e=>e:function(e){for(let t=0;t<e.length;t++)e[t]=l(e[t]);return e};function b(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))}(e)),o(e),e}let p=class{};function g(e){const t=t=>e().update(b(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function m(e=32){if(s&&"function"==typeof s.getRandomValues)return s.getRandomValues(new Uint8Array(e));if(s&&"function"==typeof s.randomBytes)return Uint8Array.from(s.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}const y=BigInt(0),w=BigInt(1),v=BigInt(2),x=BigInt(7),P=BigInt(256),$=BigInt(113),E=[],A=[],I=[];for(let e=0,t=w,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],E.push(2*(5*r+n)),A.push((e+1)*(e+2)/2%64);let s=y;for(let e=0;e<7;e++)t=(t<<w^(t>>x)*$)%P,t&v&&(s^=w<<(w<<BigInt(e))-w);I.push(s)}const B=function(e,t=!1){const n=e.length;let s=new Uint32Array(n),i=new Uint32Array(n);for(let o=0;o<n;o++){const{h:n,l:a}=r(e[o],t);[s[o],i[o]]=[n,a]}return[s,i]}(I,!0),z=B[0],O=B[1],S=(e,t,n)=>n>32?((e,t,n)=>t<<n-32|e>>>64-n)(e,t,n):((e,t,n)=>e<<n|t>>>32-n)(e,t,n),k=(e,t,n)=>n>32?((e,t,n)=>e<<n-32|t>>>64-n)(e,t,n):((e,t,n)=>t<<n|e>>>32-n)(e,t,n);let N=class e extends p{constructor(e,t,n,r=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=r,this.rounds=s,i(n),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");var o;this.state=new Uint8Array(200),this.state32=(o=this.state,new Uint32Array(o.buffer,o.byteOffset,Math.floor(o.byteLength/4)))}clone(){return this._cloneInto()}keccak(){h(this.state32),function(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let t=0;t<10;t++)n[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const r=(t+8)%10,s=(t+2)%10,i=n[s],o=n[s+1],a=S(i,o,1)^n[r],c=k(i,o,1)^n[r+1];for(let n=0;n<50;n+=10)e[t+n]^=a,e[t+n+1]^=c}let t=e[2],s=e[3];for(let n=0;n<24;n++){const r=A[n],i=S(t,s,r),o=k(t,s,r),a=E[n];t=e[a],s=e[a+1],e[a]=i,e[a+1]=o}for(let t=0;t<50;t+=10){for(let r=0;r<10;r++)n[r]=e[t+r];for(let r=0;r<10;r++)e[t+r]^=~n[(r+2)%10]&n[(r+4)%10]}e[0]^=z[r],e[1]^=O[r]}u(n)}(this.state32,this.rounds),h(this.state32),this.posOut=0,this.pos=0}update(e){a(this),o(e=b(e));const{blockLen:t,state:n}=this,r=e.length;for(let s=0;s<r;){const i=Math.min(t-this.pos,r-s);for(let t=0;t<i;t++)n[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:r}=this;e[n]^=t,128&t&&n===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){a(this,!1),o(e),this.finish();const t=this.state,{blockLen:n}=this;for(let r=0,s=e.length;r<s;){this.posOut>=n&&this.keccak();const i=Math.min(n-this.posOut,s-r);e.set(t.subarray(this.posOut,this.posOut+i),r),this.posOut+=i,r+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return i(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(c(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,u(this.state)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:s,rounds:i,enableXOF:o}=this;return t||(t=new e(n,r,s,o,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=r,t.outputLen=s,t.enableXOF=o,t.destroyed=this.destroyed,t}};const R=(()=>{return e=1,t=136,n=32,g(()=>new N(t,e,n));var e,t,n})();function M(e,{strict:t=!0}={}){return!!e&&("string"==typeof e&&(t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")))}const j="2.38.6";let L=({docsBaseUrl:e,docsPath:t="",docsSlug:n})=>t?`${e??"https://viem.sh"}${t}${n?`#${n}`:""}`:void 0,U=`viem@${j}`,F=class e extends Error{constructor(t,n={}){const r=n.cause instanceof e?n.cause.details:n.cause?.message?n.cause.message:n.details,s=n.cause instanceof e&&n.cause.docsPath||n.docsPath,i=L?.({...n,docsPath:s});super([t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...r?[`Details: ${r}`]:[],...U?[`Version: ${U}`]:[]].join("\n"),n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=t,this.version=j}walk(e){return C(this,e)}};function C(e,t){return t?.(e)?e:e&&"object"==typeof e&&"cause"in e&&void 0!==e.cause?C(e.cause,t):t?null:e}let T=class extends F{constructor({offset:e,position:t,size:n}){super(`Slice ${"start"===t?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${n}).`,{name:"SliceOffsetOutOfBoundsError"})}},D=class extends F{constructor({size:e,targetSize:t,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}};class q extends F{constructor({size:e,targetSize:t,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} is expected to be ${t} ${n} long, but is ${e} ${n} long.`,{name:"InvalidBytesLengthError"})}}function _(e,{dir:t,size:n=32}={}){return"string"==typeof e?V(e,{dir:t,size:n}):function(e,{dir:t,size:n=32}={}){if(null===n)return e;if(e.length>n)throw new D({size:e.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const i="right"===t;r[i?s:n-s-1]=e[i?s:e.length-s-1]}return r}(e,{dir:t,size:n})}function V(e,{dir:t,size:n=32}={}){if(null===n)return e;const r=e.replace("0x","");if(r.length>2*n)throw new D({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r["right"===t?"padEnd":"padStart"](2*n,"0")}`}let G=class extends F{constructor({max:e,min:t,signed:n,size:r,value:s}){super(`Number "${s}" is not in safe ${r?`${8*r}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}},H=class extends F{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}};class Z extends F{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let W=class extends F{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}};function Y(e){return M(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}function K(e,{dir:t="left"}={}){let n="string"==typeof e?e.replace("0x",""):e,r=0;for(let e=0;e<n.length-1&&"0"===n["left"===t?e:n.length-e-1].toString();e++)r++;return n="left"===t?n.slice(r):n.slice(0,n.length-r),"string"==typeof e?(1===n.length&&"right"===t&&(n=`${n}0`),`0x${n.length%2==1?`0${n}`:n}`):n}function X(e,{size:t}){if(Y(e)>t)throw new W({givenSize:Y(e),maxSize:t})}function J(e,t={}){const{signed:n}=t;t.size&&X(e,{size:t.size});const r=BigInt(e);if(!n)return r;const s=(e.length-2)/2;return r<=(1n<<8n*BigInt(s)-1n)-1n?r:r-BigInt(`0x${"f".padStart(2*s,"f")}`)-1n}function Q(e,t={}){return Number(J(e,t))}const ee=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function te(e,t={}){return"number"==typeof e||"bigint"==typeof e?se(e,t):"string"==typeof e?oe(e,t):"boolean"==typeof e?ne(e,t):re(e,t)}function ne(e,t={}){const n=`0x${Number(e)}`;return"number"==typeof t.size?(X(n,{size:t.size}),_(n,{size:t.size})):n}function re(e,t={}){let n="";for(let t=0;t<e.length;t++)n+=ee[e[t]];const r=`0x${n}`;return"number"==typeof t.size?(X(r,{size:t.size}),_(r,{dir:"right",size:t.size})):r}function se(e,t={}){const{signed:n,size:r}=t,s=BigInt(e);let i;r?i=n?(1n<<8n*BigInt(r)-1n)-1n:2n**(8n*BigInt(r))-1n:"number"==typeof e&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o="bigint"==typeof i&&n?-i-1n:0;if(i&&s>i||s<o){const t="bigint"==typeof e?"n":"";throw new G({max:i?`${i}${t}`:void 0,min:`${o}${t}`,signed:n,size:r,value:`${e}${t}`})}const a=`0x${(n&&s<0?(1n<<BigInt(8*r))+BigInt(s):s).toString(16)}`;return r?_(a,{size:r}):a}const ie=new TextEncoder;function oe(e,t={}){return re(ie.encode(e),t)}const ae=new TextEncoder;function ce(e,t={}){return"number"==typeof e||"bigint"==typeof e?function(e,t){const n=se(e,t);return de(n)}(e,t):"boolean"==typeof e?function(e,t={}){const n=new Uint8Array(1);if(n[0]=Number(e),"number"==typeof t.size)return X(n,{size:t.size}),_(n,{size:t.size});return n}(e,t):M(e)?de(e,t):le(e,t)}const ue={zero:48,nine:57,A:65,F:70,a:97,f:102};function fe(e){return e>=ue.zero&&e<=ue.nine?e-ue.zero:e>=ue.A&&e<=ue.F?e-(ue.A-10):e>=ue.a&&e<=ue.f?e-(ue.a-10):void 0}function de(e,t={}){let n=e;t.size&&(X(n,{size:t.size}),n=_(n,{dir:"right",size:t.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,i=new Uint8Array(s);for(let e=0,t=0;e<s;e++){const n=fe(r.charCodeAt(t++)),s=fe(r.charCodeAt(t++));if(void 0===n||void 0===s)throw new F(`Invalid byte sequence ("${r[t-2]}${r[t-1]}" in "${r}").`);i[e]=16*n+s}return i}function le(e,t={}){const n=ae.encode(e);return"number"==typeof t.size?(X(n,{size:t.size}),_(n,{dir:"right",size:t.size})):n}function he(e,t){const n=t||"hex",r=R(M(e,{strict:!1})?ce(e):e);return"bytes"===n?r:te(r)}function be(e){return"string"==typeof e[0]?pe(e):function(e){let t=0;for(const n of e)t+=n.length;const n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.length;return n}(e)}function pe(e){return`0x${e.reduce((e,t)=>e+t.replace("0x",""),"")}`}function ge(e,t){return he(function(e){const t="string"==typeof e?oe(e):"string"==typeof e.raw?e.raw:re(e.raw);return be([oe(`Ethereum Signed Message:\n${Y(t)}`),t])}(e),t)}function me(e){const{scheme:t,statement:n,...r}=e.match(ye)?.groups??{},{chainId:s,expirationTime:i,issuedAt:o,notBefore:a,requestId:c,...u}=e.match(we)?.groups??{},f=e.split("Resources:")[1]?.split("\n- ").slice(1);return{...r,...u,...s?{chainId:Number(s)}:{},...i?{expirationTime:new Date(i)}:{},...o?{issuedAt:new Date(o)}:{},...a?{notBefore:new Date(a)}:{},...c?{requestId:c}:{},...f?{resources:f}:{},...t?{scheme:t}:{},...n?{statement:n}:{}}}const ye=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,we=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;let ve=class extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const e=this.keys().next().value;e&&this.delete(e)}return this}},xe=class extends F{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}};const Pe=new ve(8192);function $e(e,t){if(Pe.has(`${e}.${t}`))return Pe.get(`${e}.${t}`);const n=e.substring(2).toLowerCase(),r=he(le(n),"bytes"),s=n.split("");for(let e=0;e<40;e+=2)r[e>>1]>>4>=8&&s[e]&&(s[e]=s[e].toUpperCase()),(15&r[e>>1])>=8&&s[e+1]&&(s[e+1]=s[e+1].toUpperCase());const i=`0x${s.join("")}`;return Pe.set(`${e}.${t}`,i),i}function Ee(e,t){if(!Be(e,{strict:!1}))throw new xe({address:e});return $e(e,t)}const Ae=/^0x[a-fA-F0-9]{40}$/,Ie=new ve(8192);function Be(e,t){const{strict:n=!0}=t??{},r=`${e}.${n}`;if(Ie.has(r))return Ie.get(r);const s=!(!Ae.test(e)||e.toLowerCase()!==e&&n&&$e(e)!==e);return Ie.set(r,s),s}function ze(e,t){if(!Be(e,{strict:!1}))throw new xe({address:e});if(!Be(t,{strict:!1}))throw new xe({address:t});return e.toLowerCase()===t.toLowerCase()}function Oe(e){const{address:t,domain:n,message:r,nonce:s,scheme:i,time:o=new Date}=e;if(n&&r.domain!==n)return!1;if(s&&r.nonce!==s)return!1;if(i&&r.scheme!==i)return!1;if(r.expirationTime&&o>=r.expirationTime)return!1;if(r.notBefore&&o<r.notBefore)return!1;try{if(!r.address)return!1;if(!Be(r.address,{strict:!1}))return!1;if(t&&!ze(r.address,t))return!1}catch{return!1}return!0}let Se=class e extends Error{constructor(t,n={}){const r=n.cause instanceof e?n.cause.details:n.cause?.message?n.cause.message:n.details,s=n.cause instanceof e&&n.cause.docsPath||n.docsPath;super([t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],"Version: abitype@1.1.0"].join("\n")),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=t}};function ke(e,t){const n=e.exec(t);return n?.groups}const Ne=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Re=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,Me=/^\(.+?\).*?$/,je=/^tuple(?<array>(\[(\d*)\])*)$/;function Le(e){let t=e.type;if(je.test(e.type)&&"components"in e){t="(";const n=e.components.length;for(let r=0;r<n;r++){t+=Le(e.components[r]),r<n-1&&(t+=", ")}const r=ke(je,e.type);return t+=`)${r?.array??""}`,Le({...e,type:t})}return"indexed"in e&&e.indexed&&(t=`${t} indexed`),e.name?`${t} ${e.name}`:t}function Ue(e){let t="";const n=e.length;for(let r=0;r<n;r++){t+=Le(e[r]),r!==n-1&&(t+=", ")}return t}const Fe=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;const Ce=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;const Te=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;const De=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function qe(e){return De.test(e)}function _e(e){return ke(De,e)}const Ve=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;const Ge=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;const He=/^receive\(\) external payable$/;const Ze=new Set(["memory","indexed","storage","calldata"]),We=new Set(["indexed"]),Ye=new Set(["calldata","memory","storage"]);class Ke extends Se{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class Xe extends Se{constructor({type:e}){super("Unknown type.",{metaMessages:[`Type "${e}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class Je extends Se{constructor({params:e}){super("Failed to parse ABI parameters.",{details:`parseAbiParameters(${JSON.stringify(e,null,2)})`,docsPath:"/api/human#parseabiparameters-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiParametersError"})}}class Qe extends Se{constructor({param:e}){super("Invalid ABI parameter.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class et extends Se{constructor({param:e,name:t}){super("Invalid ABI parameter.",{details:e,metaMessages:[`"${t}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class tt extends Se{constructor({param:e,type:t,modifier:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${n}" not allowed${t?` in "${t}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class nt extends Se{constructor({param:e,type:t,modifier:n}){super("Invalid ABI parameter.",{details:e,metaMessages:[`Modifier "${n}" not allowed${t?` in "${t}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${n}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class rt extends Se{constructor({abiParameter:e}){super("Invalid ABI parameter.",{details:JSON.stringify(e,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class st extends Se{constructor({signature:e,type:t}){super(`Invalid ${t} signature.`,{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class it extends Se{constructor({signature:e}){super("Unknown signature.",{details:e}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class ot extends Se{constructor({signature:e}){super("Invalid struct signature.",{details:e,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class at extends Se{constructor({type:e}){super("Circular reference detected.",{metaMessages:[`Struct "${e}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class ct extends Se{constructor({current:e,depth:t}){super("Unbalanced parentheses.",{metaMessages:[`"${e.trim()}" has too many ${t>0?"opening":"closing"} parentheses.`],details:`Depth "${t}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}const ut=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function ft(e,t={}){if(function(e){return Te.test(e)}(e))return function(e,t={}){const n=function(e){return ke(Te,e)}(e);if(!n)throw new st({signature:e,type:"function"});const r=pt(n.parameters),s=[],i=r.length;for(let e=0;e<i;e++)s.push(bt(r[e],{modifiers:Ye,structs:t,type:"function"}));const o=[];if(n.returns){const e=pt(n.returns),r=e.length;for(let n=0;n<r;n++)o.push(bt(e[n],{modifiers:Ye,structs:t,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:o}}(e,t);if(function(e){return Ce.test(e)}(e))return function(e,t={}){const n=function(e){return ke(Ce,e)}(e);if(!n)throw new st({signature:e,type:"event"});const r=pt(n.parameters),s=[],i=r.length;for(let e=0;e<i;e++)s.push(bt(r[e],{modifiers:We,structs:t,type:"event"}));return{name:n.name,type:"event",inputs:s}}(e,t);if(function(e){return Fe.test(e)}(e))return function(e,t={}){const n=function(e){return ke(Fe,e)}(e);if(!n)throw new st({signature:e,type:"error"});const r=pt(n.parameters),s=[],i=r.length;for(let e=0;e<i;e++)s.push(bt(r[e],{structs:t,type:"error"}));return{name:n.name,type:"error",inputs:s}}(e,t);if(function(e){return Ve.test(e)}(e))return function(e,t={}){const n=function(e){return ke(Ve,e)}(e);if(!n)throw new st({signature:e,type:"constructor"});const r=pt(n.parameters),s=[],i=r.length;for(let e=0;e<i;e++)s.push(bt(r[e],{structs:t,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}(e,t);if(function(e){return Ge.test(e)}(e))return function(e){const t=function(e){return ke(Ge,e)}(e);if(!t)throw new st({signature:e,type:"fallback"});return{type:"fallback",stateMutability:t.stateMutability??"nonpayable"}}(e);if(function(e){return He.test(e)}(e))return{type:"receive",stateMutability:"payable"};throw new it({signature:e})}const dt=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*(?:\spayable)?)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,lt=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,ht=/^u?int$/;function bt(e,t){const n=function(e,t,n){let r="";if(n)for(const e of Object.entries(n)){if(!e)continue;let t="";for(const n of e[1])t+=`[${n.type}${n.name?`:${n.name}`:""}]`;r+=`(${e[0]}{${t}})`}return t?`${t}:${e}${r}`:e}(e,t?.type,t?.structs);if(ut.has(n))return ut.get(n);const r=Me.test(e),s=ke(r?lt:dt,e);if(!s)throw new Qe({param:e});if(s.name&&function(e){return"address"===e||"bool"===e||"function"===e||"string"===e||"tuple"===e||Ne.test(e)||Re.test(e)||mt.test(e)}(s.name))throw new et({param:e,name:s.name});const i=s.name?{name:s.name}:{},o="indexed"===s.modifier?{indexed:!0}:{},a=t?.structs??{};let c,u={};if(r){c="tuple";const e=pt(s.type),t=[],n=e.length;for(let r=0;r<n;r++)t.push(bt(e[r],{structs:a}));u={components:t}}else if(s.type in a)c="tuple",u={components:a[s.type]};else if(ht.test(s.type))c=`${s.type}256`;else if("address payable"===s.type)c="address";else if(c=s.type,"struct"!==t?.type&&!gt(c))throw new Xe({type:c});if(s.modifier){if(!t?.modifiers?.has?.(s.modifier))throw new tt({param:e,type:t?.type,modifier:s.modifier});if(Ye.has(s.modifier)&&!function(e,t){return t||"bytes"===e||"string"===e||"tuple"===e}(c,!!s.array))throw new nt({param:e,type:t?.type,modifier:s.modifier})}const f={type:`${c}${s.array??""}`,...i,...o,...u};return ut.set(n,f),f}function pt(e,t=[],n="",r=0){const s=e.trim().length;for(let i=0;i<s;i++){const s=e[i],o=e.slice(i+1);switch(s){case",":return 0===r?pt(o,[...t,n.trim()]):pt(o,t,`${n}${s}`,r);case"(":return pt(o,t,`${n}${s}`,r+1);case")":return pt(o,t,`${n}${s}`,r-1);default:return pt(o,t,`${n}${s}`,r)}}if(""===n)return t;if(0!==r)throw new ct({current:n,depth:r});return t.push(n.trim()),t}function gt(e){return"address"===e||"bool"===e||"function"===e||"string"===e||Ne.test(e)||Re.test(e)}const mt=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function yt(e){const t={},n=e.length;for(let r=0;r<n;r++){const n=e[r];if(!qe(n))continue;const s=_e(n);if(!s)throw new st({signature:n,type:"struct"});const i=s.properties.split(";"),o=[],a=i.length;for(let e=0;e<a;e++){const t=i[e].trim();if(!t)continue;const n=bt(t,{type:"struct"});o.push(n)}if(!o.length)throw new ot({signature:n});t[s.name]=o}const r={},s=Object.entries(t),i=s.length;for(let e=0;e<i;e++){const[n,i]=s[e];r[n]=vt(i,t)}return r}const wt=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function vt(e,t,n=new Set){const r=[],s=e.length;for(let i=0;i<s;i++){const s=e[i];if(Me.test(s.type))r.push(s);else{const e=ke(wt,s.type);if(!e?.type)throw new rt({abiParameter:s});const{array:i,type:o}=e;if(o in t){if(n.has(o))throw new at({type:o});r.push({...s,type:`tuple${i??""}`,components:vt(t[o]??[],t,new Set([...n,o]))})}else{if(!gt(o))throw new Ke({type:o});r.push(s)}}}return r}function xt(e){const t=yt(e),n=[],r=e.length;for(let s=0;s<r;s++){const r=e[s];qe(r)||n.push(ft(r,t))}return n}function Pt(e){const t=[];if("string"==typeof e){const n=pt(e),r=n.length;for(let e=0;e<r;e++)t.push(bt(n[e],{modifiers:Ze}))}else{const n=yt(e),r=e.length;for(let s=0;s<r;s++){const r=e[s];if(qe(r))continue;const i=pt(r),o=i.length;for(let e=0;e<o;e++)t.push(bt(i[e],{modifiers:Ze,structs:n}))}}if(0===t.length)throw new Je({params:e});return t}class $t extends Error{constructor(e,t={}){const n=(()=>{if(t.cause instanceof $t){if(t.cause.details)return t.cause.details;if(t.cause.shortMessage)return t.cause.shortMessage}return t.cause&&"details"in t.cause&&"string"==typeof t.cause.details?t.cause.details:t.cause?.message?t.cause.message:t.details})(),r=t.cause instanceof $t&&t.cause.docsPath||t.docsPath,s=`https://oxlib.sh${r??""}`;super([e||"An error occurred.",...t.metaMessages?["",...t.metaMessages]:[],...n||r?["",n?`Details: ${n}`:void 0,r?`See: ${s}`:void 0]:[]].filter(e=>"string"==typeof e).join("\n"),t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:"ox@0.1.1"}),this.cause=t.cause,this.details=n,this.docs=s,this.docsPath=r,this.shortMessage=e}walk(e){return Et(this,e)}}function Et(e,t){return t?.(e)?e:e&&"object"==typeof e&&"cause"in e&&e.cause?Et(e.cause,t):t?null:e}function At(e,t){if(sn(e)>t)throw new hn({givenSize:sn(e),maxSize:t})}const It=48,Bt=57,zt=65,Ot=70,St=97,kt=102;function Nt(e){return e>=It&&e<=Bt?e-It:e>=zt&&e<=Ot?e-(zt-10):e>=St&&e<=kt?e-(St-10):void 0}function Rt(e,t={}){const{dir:n="left"}=t;let r=e,s=0;for(let e=0;e<r.length-1&&"0"===r["left"===n?e:r.length-e-1].toString();e++)s++;return r="left"===n?r.slice(s):r.slice(0,r.length-s),r}function Mt(e,t){if(Ht(e)>t)throw new Kt({givenSize:Ht(e),maxSize:t})}function jt(e,t={}){const{dir:n,size:r=32}=t;if(0===r)return e;const s=e.replace("0x","");if(s.length>2*r)throw new Jt({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s["right"===n?"padEnd":"padStart"](2*r,"0")}`}const Lt=new TextEncoder,Ut=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Ft(...e){return`0x${e.reduce((e,t)=>e+t.replace("0x",""),"")}`}function Ct(e,t={}){const n=`0x${Number(e)}`;return"number"==typeof t.size?(Mt(n,t.size),_t(n,t.size)):n}function Tt(e,t={}){let n="";for(let t=0;t<e.length;t++)n+=Ut[e[t]];const r=`0x${n}`;return"number"==typeof t.size?(Mt(r,t.size),Vt(r,t.size)):r}function Dt(e,t={}){const{signed:n,size:r}=t,s=BigInt(e);let i;r?i=n?(1n<<8n*BigInt(r)-1n)-1n:2n**(8n*BigInt(r))-1n:"number"==typeof e&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o="bigint"==typeof i&&n?-i-1n:0;if(i&&s>i||s<o){const t="bigint"==typeof e?"n":"";throw new Yt({max:i?`${i}${t}`:void 0,min:`${o}${t}`,signed:n,size:r,value:`${e}${t}`})}const a=`0x${(n&&s<0?(1n<<BigInt(8*r))+BigInt(s):s).toString(16)}`;return r?_t(a,r):a}function qt(e,t={}){return Tt(Lt.encode(e),t)}function _t(e,t){return jt(e,{dir:"left",size:t})}function Vt(e,t){return jt(e,{dir:"right",size:t})}function Gt(e,t,n,r={}){const{strict:s}=r;!function(e,t){if("number"==typeof t&&t>0&&t>Ht(e)-1)throw new Xt({offset:t,position:"start",size:Ht(e)})}(e,t);const i=`0x${e.replace("0x","").slice(2*(t??0),2*(n??e.length))}`;return s&&function(e,t,n){if("number"==typeof t&&"number"==typeof n&&Ht(e)!==n-t)throw new Xt({offset:n,position:"end",size:Ht(e)})}(i,t,n),i}function Ht(e){return Math.ceil((e.length-2)/2)}function Zt(e,t={}){const{signed:n}=t;t.size&&Mt(e,t.size);const r=BigInt(e);if(!n)return r;const s=(e.length-2)/2,i=(1n<<8n*BigInt(s))-1n;return r<=i>>1n?r:r-i-1n}function Wt(e,t={}){const{signed:n,size:r}=t;return Number(n||r?Zt(e,t):e)}class Yt extends $t{constructor({max:e,min:t,signed:n,size:r,value:s}){super(`Number \`${s}\` is not in safe${r?` ${8*r}-bit`:""}${n?" signed":" unsigned"} integer range ${e?`(\`${t}\` to \`${e}\`)`:`(above \`${t}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}let Kt=class extends $t{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}};class Xt extends $t{constructor({offset:e,position:t,size:n}){super(`Slice ${"start"===t?"starting":"ending"} at offset \`${e}\` is out-of-bounds (size: \`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}let Jt=class extends $t{constructor({size:e,targetSize:t,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};const Qt=new TextDecoder,en=new TextEncoder;function tn(e){return e instanceof Uint8Array?e:"string"==typeof e?nn(e):function(e){return e instanceof Uint8Array?e:new Uint8Array(e)}(e)}function nn(e,t={}){const{size:n}=t;let r=e;n&&(Mt(e,n),r=Vt(e,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const i=s.length/2,o=new Uint8Array(i);for(let e=0,t=0;e<i;e++){const n=Nt(s.charCodeAt(t++)),r=Nt(s.charCodeAt(t++));if(void 0===n||void 0===r)throw new $t(`Invalid byte sequence ("${s[t-2]}${s[t-1]}" in "${s}").`);o[e]=16*n+r}return o}function rn(e,t={}){const{size:n}=t,r=en.encode(e);return"number"==typeof n?(At(r,n),function(e,t){return function(e,t={}){const{dir:n,size:r=32}=t;if(0===r)return e;if(e.length>r)throw new bn({size:e.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let t=0;t<r;t++){const i="right"===n;s[i?t:r-t-1]=e[i?t:e.length-t-1]}return s}(e,{dir:"right",size:t})}(r,n)):r}function sn(e){return e.length}function on(e,t,n,r={}){const{strict:s}=r;return e.slice(t,n)}function an(e,t={}){const{size:n}=t;void 0!==n&&At(e,n);return Zt(Tt(e,t),t)}function cn(e,t={}){const{size:n}=t;let r=e;if(void 0!==n&&(At(r,n),r=dn(r)),r.length>1||r[0]>1)throw new ln(r);return Boolean(r[0])}function un(e,t={}){const{size:n}=t;void 0!==n&&At(e,n);return Wt(Tt(e,t),t)}function fn(e,t={}){const{size:n}=t;let r=e;return void 0!==n&&(At(r,n),r=Rt(r,{dir:"right"})),Qt.decode(r)}function dn(e){return Rt(e,{dir:"left"})}class ln extends $t{constructor(e){super(`Bytes value \`${e}\` is not a valid boolean.`,{metaMessages:["The bytes array must contain a single byte of either a `0` or `1` value."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesBooleanError"})}}class hn extends $t{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed \`${t}\` bytes. Given size: \`${e}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class bn extends $t{constructor({size:e,targetSize:t,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (\`${e}\`) exceeds padding size (\`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}}class pn extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&void 0!==t&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const e=this.keys().next().value;e&&this.delete(e)}return this}}const gn={checksum:new pn(8192)}.checksum;function mn(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function yn(e,...t){if(!((n=e)instanceof Uint8Array||ArrayBuffer.isView(n)&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */
var n;if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function wn(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function vn(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function xn(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}const Pn=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])()?e=>e:function(e){for(let t=0;t<e.length;t++)e[t]=xn(e[t]);return e};function $n(e){return"string"==typeof e&&(e=function(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))}(e)),yn(e),e}class En{}const An=BigInt(2**32-1),In=BigInt(32);function Bn(e,t=!1){return t?{h:Number(e&An),l:Number(e>>In&An)}:{h:0|Number(e>>In&An),l:0|Number(e&An)}}const zn=BigInt(0),On=BigInt(1),Sn=BigInt(2),kn=BigInt(7),Nn=BigInt(256),Rn=BigInt(113),Mn=[],jn=[],Ln=[];for(let e=0,t=On,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],Mn.push(2*(5*r+n)),jn.push((e+1)*(e+2)/2%64);let s=zn;for(let e=0;e<7;e++)t=(t<<On^(t>>kn)*Rn)%Nn,t&Sn&&(s^=On<<(On<<BigInt(e))-On);Ln.push(s)}const Un=function(e,t=!1){const n=e.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let i=0;i<n;i++){const{h:n,l:o}=Bn(e[i],t);[r[i],s[i]]=[n,o]}return[r,s]}(Ln,!0),Fn=Un[0],Cn=Un[1],Tn=(e,t,n)=>n>32?((e,t,n)=>t<<n-32|e>>>64-n)(e,t,n):((e,t,n)=>e<<n|t>>>32-n)(e,t,n),Dn=(e,t,n)=>n>32?((e,t,n)=>e<<n-32|t>>>64-n)(e,t,n):((e,t,n)=>t<<n|e>>>32-n)(e,t,n);class qn extends En{constructor(e,t,n,r=!1,s=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=r,this.rounds=s,mn(n),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");var i;this.state=new Uint8Array(200),this.state32=(i=this.state,new Uint32Array(i.buffer,i.byteOffset,Math.floor(i.byteLength/4)))}clone(){return this._cloneInto()}keccak(){Pn(this.state32),function(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let t=0;t<10;t++)n[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const r=(t+8)%10,s=(t+2)%10,i=n[s],o=n[s+1],a=Tn(i,o,1)^n[r],c=Dn(i,o,1)^n[r+1];for(let n=0;n<50;n+=10)e[t+n]^=a,e[t+n+1]^=c}let t=e[2],s=e[3];for(let n=0;n<24;n++){const r=jn[n],i=Tn(t,s,r),o=Dn(t,s,r),a=Mn[n];t=e[a],s=e[a+1],e[a]=i,e[a+1]=o}for(let t=0;t<50;t+=10){for(let r=0;r<10;r++)n[r]=e[t+r];for(let r=0;r<10;r++)e[t+r]^=~n[(r+2)%10]&n[(r+4)%10]}e[0]^=Fn[r],e[1]^=Cn[r]}vn(n)}(this.state32,this.rounds),Pn(this.state32),this.posOut=0,this.pos=0}update(e){wn(this),yn(e=$n(e));const{blockLen:t,state:n}=this,r=e.length;for(let s=0;s<r;){const i=Math.min(t-this.pos,r-s);for(let t=0;t<i;t++)n[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:r}=this;e[n]^=t,128&t&&n===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){wn(this,!1),yn(e),this.finish();const t=this.state,{blockLen:n}=this;for(let r=0,s=e.length;r<s;){this.posOut>=n&&this.keccak();const i=Math.min(n-this.posOut,s-r);e.set(t.subarray(this.posOut,this.posOut+i),r),this.posOut+=i,r+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return mn(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(function(e,t){yn(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,vn(this.state)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:r,rounds:s,enableXOF:i}=this;return e||(e=new qn(t,n,r,i,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=r,e.enableXOF=i,e.destroyed=this.destroyed,e}}const _n=(e,t,n)=>function(e){const t=t=>e().update($n(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}(()=>new qn(t,e,n)),Vn=(()=>_n(1,136,32))();const Gn=/^0x[a-fA-F0-9]{40}$/;function Hn(e,t={}){const{strict:n=!0}=t;if(!Gn.test(e))throw new Wn({address:e,cause:new Yn});if(n){if(e.toLowerCase()===e)return;if(Zn(e)!==e)throw new Wn({address:e,cause:new Kn})}}function Zn(e){if(gn.has(e))return gn.get(e);Hn(e,{strict:!1});const t=e.substring(2).toLowerCase(),n=function(e,t={}){const{as:n=("string"==typeof e?"Hex":"Bytes")}=t,r=Vn(tn(e));return"Bytes"===n?r:Tt(r)}(rn(t),{as:"Bytes"}),r=t.split("");for(let e=0;e<40;e+=2)n[e>>1]>>4>=8&&r[e]&&(r[e]=r[e].toUpperCase()),(15&n[e>>1])>=8&&r[e+1]&&(r[e+1]=r[e+1].toUpperCase());const s=`0x${r.join("")}`;return gn.set(e,s),s}class Wn extends $t{constructor({address:e,cause:t}){super(`Address "${e}" is invalid.`,{cause:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class Yn extends $t{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class Kn extends $t{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}const Xn=/^(.*)\[([0-9]*)\]$/,Jn=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Qn=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,er=2n**256n-1n;function tr(e,t,n){const{checksumAddress:r,staticPosition:s}=n,i=or(t.type);if(i){const[n,o]=i;return function(e,t,n){const{checksumAddress:r,length:s,staticPosition:i}=n;if(!s){const n=i+un(e.readBytes(rr)),s=n+nr;e.setPosition(n);const o=un(e.readBytes(nr)),a=ar(t);let c=0;const u=[];for(let n=0;n<o;++n){e.setPosition(s+(a?32*n:c));const[i,o]=tr(e,t,{checksumAddress:r,staticPosition:s});c+=o,u.push(i)}return e.setPosition(i+32),[u,32]}if(ar(t)){const n=i+un(e.readBytes(rr)),o=[];for(let i=0;i<s;++i){e.setPosition(n+32*i);const[s]=tr(e,t,{checksumAddress:r,staticPosition:n});o.push(s)}return e.setPosition(i+32),[o,32]}let o=0;const a=[];for(let n=0;n<s;++n){const[n,s]=tr(e,t,{checksumAddress:r,staticPosition:i+o});o+=s,a.push(n)}return[a,o]}(e,{...t,type:o},{checksumAddress:r,length:n,staticPosition:s})}if("tuple"===t.type)return function(e,t,n){const{checksumAddress:r,staticPosition:s}=n,i=0===t.components.length||t.components.some(({name:e})=>!e),o=i?[]:{};let a=0;if(ar(t)){const n=s+un(e.readBytes(rr));for(let s=0;s<t.components.length;++s){const c=t.components[s];e.setPosition(n+a);const[u,f]=tr(e,c,{checksumAddress:r,staticPosition:n});a+=f,o[i?s:c?.name]=u}return e.setPosition(s+32),[o,32]}for(let n=0;n<t.components.length;++n){const c=t.components[n],[u,f]=tr(e,c,{checksumAddress:r,staticPosition:s});o[i?n:c?.name]=u,a+=f}return[o,a]}(e,t,{checksumAddress:r,staticPosition:s});if("address"===t.type)return function(e,t={}){const{checksum:n=!1}=t,r=e.readBytes(32),s=e=>n?Zn(e):e;return[s(Tt(on(r,-20))),32]}(e,{checksum:r});if("bool"===t.type)return function(e){return[cn(e.readBytes(32),{size:32}),32]}(e);if(t.type.startsWith("bytes"))return function(e,t,{staticPosition:n}){const[r,s]=t.type.split("bytes");if(!s){const t=un(e.readBytes(32));e.setPosition(n+t);const r=un(e.readBytes(32));if(0===r)return e.setPosition(n+32),["0x",32];const s=e.readBytes(r);return e.setPosition(n+32),[Tt(s),32]}const i=Tt(e.readBytes(Number.parseInt(s,10),32));return[i,32]}(e,t,{staticPosition:s});if(t.type.startsWith("uint")||t.type.startsWith("int"))return function(e,t){const n=t.type.startsWith("int"),r=Number.parseInt(t.type.split("int")[1]||"256",10),s=e.readBytes(32);return[r>48?an(s,{signed:n}):un(s,{signed:n}),32]}(e,t);if("string"===t.type)return function(e,{staticPosition:t}){const n=un(e.readBytes(32)),r=t+n;e.setPosition(r);const s=un(e.readBytes(32));if(0===s)return e.setPosition(t+32),["",32];const i=e.readBytes(s,32),o=fn(dn(i));return e.setPosition(t+32),[o,32]}(e,{staticPosition:s});throw new Pr(t.type)}const nr=32,rr=32;function sr({checksumAddress:e=!1,parameter:t,value:n}){const r=t,s=or(r.type);if(s){const[t,i]=s;return function(e,t){const{checksumAddress:n,length:r,parameter:s}=t,i=null===r;if(!Array.isArray(e))throw new xr(e);if(!i&&e.length!==r)throw new yr({expectedLength:r,givenLength:e.length,type:`${s.type}[${r}]`});let o=!1;const a=[];for(let t=0;t<e.length;t++){const r=sr({checksumAddress:n,parameter:s,value:e[t]});r.dynamic&&(o=!0),a.push(r)}if(i||o){const e=ir(a);if(i){const t=Dt(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?Ft(t,e):t}}if(o)return{dynamic:!0,encoded:e}}return{dynamic:!1,encoded:Ft(...a.map(({encoded:e})=>e))}}(n,{checksumAddress:e,length:t,parameter:{...r,type:i}})}if("tuple"===r.type)return function(e,t){const{checksumAddress:n,parameter:r}=t;let s=!1;const i=[];for(let t=0;t<r.components.length;t++){const o=r.components[t],a=sr({checksumAddress:n,parameter:o,value:e[Array.isArray(e)?t:o.name]});i.push(a),a.dynamic&&(s=!0)}return{dynamic:s,encoded:s?ir(i):Ft(...i.map(({encoded:e})=>e))}}(n,{checksumAddress:e,parameter:r});if("address"===r.type)return function(e,t){const{checksum:n=!1}=t;return Hn(e,{strict:n}),{dynamic:!1,encoded:_t(e.toLowerCase())}}(n,{checksum:e});if("bool"===r.type)return function(e){if("boolean"!=typeof e)throw new $t(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:_t(Ct(e))}}(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const e=r.type.startsWith("int"),[,,t="256"]=Qn.exec(r.type)??[];return function(e,{signed:t,size:n}){if("number"==typeof n){const r=2n**(BigInt(n)-(t?1n:0n))-1n,s=t?-r-1n:0n;if(e>r||e<s)throw new Yt({max:r.toString(),min:s.toString(),signed:t,size:n/8,value:e.toString()})}return{dynamic:!1,encoded:Dt(e,{size:32,signed:t})}}(n,{signed:e,size:Number(t)})}if(r.type.startsWith("bytes"))return function(e,{type:t}){const[,n]=t.split("bytes"),r=Ht(e);if(!n){let t=e;return r%32!=0&&(t=Vt(t,32*Math.ceil((e.length-2)/2/32))),{dynamic:!0,encoded:Ft(_t(Dt(r,{size:32})),t)}}if(r!==Number.parseInt(n,10))throw new wr({expectedSize:Number.parseInt(n,10),value:e});return{dynamic:!1,encoded:Vt(e)}}(n,{type:r.type});if("string"===r.type)return function(e){const t=qt(e),n=Math.ceil(Ht(t)/32),r=[];for(let e=0;e<n;e++)r.push(Vt(Gt(t,32*e,32*(e+1))));return{dynamic:!0,encoded:Ft(Vt(Dt(Ht(t),{size:32})),...r)}}(n);throw new Pr(r.type)}function ir(e){let t=0;for(let n=0;n<e.length;n++){const{dynamic:r,encoded:s}=e[n];t+=r?32:Ht(s)}const n=[],r=[];let s=0;for(let i=0;i<e.length;i++){const{dynamic:o,encoded:a}=e[i];o?(n.push(Dt(t+s,{size:32})),r.push(a),s+=Ht(a)):n.push(a)}return Ft(...n,...r)}function or(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}function ar(e){const{type:t}=e;if("string"===t)return!0;if("bytes"===t)return!0;if(t.endsWith("[]"))return!0;if("tuple"===t)return e.components?.some(ar);const n=or(e.type);return!(!n||!ar({...e,type:n[1]}))}const cr={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new dr({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new fr({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new ur({offset:e});const t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new ur({offset:e});const t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){const n=t??this.position;return this.assertPosition(n+e-1),this.bytes.subarray(n,n+e)},inspectUint8(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){const t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){const t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){const t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,255&e),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();const n=this.inspectBytes(e);return this.position+=t??e,n},readUint8(){this.assertReadLimit(),this._touch();const e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();const e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();const e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();const e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){const t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};let ur=class extends $t{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.NegativeOffsetError"})}},fr=class extends $t{constructor({length:e,position:t}){super(`Position \`${t}\` is out of bounds (\`0 < position < ${e}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.PositionOutOfBoundsError"})}},dr=class extends $t{constructor({count:e,limit:t}){super(`Recursive read limit of \`${t}\` exceeded (recursive read count: \`${e}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.RecursiveReadLimitExceededError"})}};function lr(e,t,n={}){const{as:r="Array",checksumAddress:s=!1}=n,i="string"==typeof t?nn(t):t,o=function(e,{recursiveReadLimit:t=8192}={}){const n=Object.create(cr);return n.bytes=e,n.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=t,n}(i);if(0===sn(i)&&e.length>0)throw new mr;if(sn(i)&&sn(i)<32)throw new gr({data:"string"==typeof t?t:Tt(t),parameters:e,size:sn(i)});let a=0;const c="Array"===r?[]:{};for(let t=0;t<e.length;++t){const n=e[t];o.setPosition(a);const[i,u]=tr(o,n,{checksumAddress:s,staticPosition:0});a+=u,"Array"===r?c.push(i):c[n.name??t]=i}return c}function hr(e,t,n){const{checksumAddress:r=!1}={};if(e.length!==t.length)throw new vr({expectedLength:e.length,givenLength:t.length});const s=function({checksumAddress:e,parameters:t,values:n}){const r=[];for(let s=0;s<t.length;s++)r.push(sr({checksumAddress:e,parameter:t[s],value:n[s]}));return r}({checksumAddress:r,parameters:e,values:t}),i=ir(s);return 0===i.length?"0x":i}function br(e,t){if(e.length!==t.length)throw new vr({expectedLength:e.length,givenLength:t.length});const n=[];for(let r=0;r<e.length;r++){const s=e[r],i=t[r];n.push(br.encode(s,i))}return Ft(...n)}function pr(e){return Array.isArray(e)&&"string"==typeof e[0]||"string"==typeof e?Pt(e):e}!function(e){e.encode=function e(t,n,r=!1){if("address"===t){const e=n;return Hn(e),_t(e.toLowerCase(),r?32:0)}if("string"===t)return qt(n);if("bytes"===t)return n;if("bool"===t)return _t(Ct(n),r?32:1);const s=t.match(Qn);if(s){const[e,t,i="256"]=s,o=Number.parseInt(i,10)/8;return Dt(n,{size:r?32:o,signed:"int"===t})}const i=t.match(Jn);if(i){const[e,t]=i;if(Number.parseInt(t,10)!==(n.length-2)/2)throw new wr({expectedSize:Number.parseInt(t,10),value:n});return Vt(n,r?32:0)}const o=t.match(Xn);if(o&&Array.isArray(n)){const[t,r]=o,s=[];for(let t=0;t<n.length;t++)s.push(e(r,n[t],!0));return 0===s.length?"0x":Ft(...s)}throw new Pr(t)}}(br||(br={}));class gr extends $t{constructor({data:e,parameters:t,size:n}){super(`Data size of ${n} bytes is too small for given parameters.`,{metaMessages:[`Params: (${Ue(t)})`,`Data:   ${e} (${n} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.DataSizeTooSmallError"})}}class mr extends $t{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ZeroDataError"})}}class yr extends $t{constructor({expectedLength:e,givenLength:t,type:n}){super(`Array length mismatch for type \`${n}\`. Expected: \`${e}\`. Given: \`${t}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class wr extends $t{constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${Ht(t)}) does not match expected size (bytes${e}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class vr extends $t{constructor({expectedLength:e,givenLength:t}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${e}`,`Given length (values): ${t}`].join("\n")),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}let xr=class extends $t{constructor(e){super(`Value \`${e}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}};class Pr extends $t{constructor(e){super(`Type \`${e}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}const $r="0x6492649264926492649264926492649264926492649264926492649264926492";function Er(e){try{return function(e){if(Gt(e,-32)!==$r)throw new Ar(e)}(e),!0}catch{return!1}}let Ar=class extends $t{constructor(e){super(`Value \`${e}\` is an invalid ERC-6492 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc6492.InvalidWrappedSignatureError"})}};function Ir(e,t={}){const{recovered:n}=t;if(void 0===e.r)throw new kr({signature:e});if(void 0===e.s)throw new kr({signature:e});if(n&&void 0===e.yParity)throw new kr({signature:e});if(e.r<0n||e.r>er)throw new Nr({value:e.r});if(e.s<0n||e.s>er)throw new Rr({value:e.s});if("number"==typeof e.yParity&&0!==e.yParity&&1!==e.yParity)throw new Mr({value:e.yParity})}function Br(e){if(130!==e.length&&132!==e.length)throw new Sr({signature:e});const t=BigInt(Gt(e,0,32)),n=BigInt(Gt(e,32,64)),r=(()=>{const t=Number(`0x${e.slice(130)}`);if(!Number.isNaN(t))try{return Or(t)}catch{throw new Mr({value:t})}})();return void 0===r?{r:t,s:n}:{r:t,s:n,yParity:r}}function zr(e){if(void 0!==e.r&&void 0!==e.s)return function(e){const t="string"==typeof e?Br(e):e instanceof Uint8Array?function(e){return Br(Tt(e))}(e):"string"==typeof e.r?function(e){const t=(()=>{const t=e.v?Number(e.v):void 0;let n=e.yParity?Number(e.yParity):void 0;if("number"==typeof t&&"number"!=typeof n&&(n=Or(t)),"number"!=typeof n)throw new Mr({value:e.yParity});return n})();return{r:BigInt(e.r),s:BigInt(e.s),yParity:t}}(e):e.v?function(e){return{r:e.r,s:e.s,yParity:Or(e.v)}}(e):{r:e.r,s:e.s,...void 0!==e.yParity?{yParity:e.yParity}:{}};return Ir(t),t}(e)}function Or(e){if(0===e||27===e)return 0;if(1===e||28===e)return 1;if(e>=35)return e%2==0?1:0;throw new jr({value:e})}class Sr extends $t{constructor({signature:e}){var t;super(`Value \`${e}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${Ht((t=e,t instanceof Uint8Array?Tt(t):Array.isArray(t)?Tt(new Uint8Array(t)):t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class kr extends $t{constructor({signature:e}){var t,n;super(`Signature \`${t=e,JSON.stringify(t,(e,t)=>"bigint"==typeof t?t.toString()+"#__bigint":t,n)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}}class Nr extends $t{constructor({value:e}){super(`Value \`${e}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}}class Rr extends $t{constructor({value:e}){super(`Value \`${e}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}}class Mr extends $t{constructor({value:e}){super(`Value \`${e}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class jr extends $t{constructor({value:e}){super(`Value \`${e}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}function Lr(e,t={}){return"string"==typeof e.chainId?function(e){const{address:t,chainId:n,nonce:r}=e,s=zr(e);return{address:t,chainId:Number(n),nonce:BigInt(r),...s}}(e):{...e,...t.signature}}const Ur=pr("(uint256 chainId, address delegation, uint256 nonce, uint8 yParity, uint256 r, uint256 s), address to, bytes data");function Fr(e){if("string"==typeof e){if("0x8010801080108010801080108010801080108010801080108010801080108010"!==Gt(e,-32))throw new Cr(e)}else Ir(e.authorization)}class Cr extends $t{constructor(e){super(`Value \`${e}\` is an invalid ERC-8010 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc8010.InvalidWrappedSignatureError"})}}const Tr=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentBlockTimestamp",outputs:[{internalType:"uint256",name:"timestamp",type:"uint256"}],stateMutability:"view",type:"function"}],Dr=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],qr=[{name:"isValidSignature",type:"function",stateMutability:"view",inputs:[{name:"hash",type:"bytes32"},{name:"signature",type:"bytes"}],outputs:[{name:"",type:"bytes4"}]}],_r=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],Vr="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",Gr="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572",Hr="0x608060405234801561001057600080fd5b506115b9806100206000396000f3fe6080604052600436106100f35760003560e01c80634d2301cc1161008a578063a8b0574e11610059578063a8b0574e14610325578063bce38bd714610350578063c3077fa914610380578063ee82ac5e146103b2576100f3565b80634d2301cc1461026257806372425d9d1461029f57806382ad56cb146102ca57806386d516e8146102fa576100f3565b80633408e470116100c65780633408e470146101af578063399542e9146101da5780633e64a6961461020c57806342cbb15c14610237576100f3565b80630f28c97d146100f8578063174dea7114610123578063252dba421461015357806327e86d6e14610184575b600080fd5b34801561010457600080fd5b5061010d6103ef565b60405161011a9190610c0a565b60405180910390f35b61013d60048036038101906101389190610c94565b6103f7565b60405161014a9190610e94565b60405180910390f35b61016d60048036038101906101689190610f0c565b610615565b60405161017b92919061101b565b60405180910390f35b34801561019057600080fd5b506101996107ab565b6040516101a69190611064565b60405180910390f35b3480156101bb57600080fd5b506101c46107b7565b6040516101d19190610c0a565b60405180910390f35b6101f460048036038101906101ef91906110ab565b6107bf565b6040516102039392919061110b565b60405180910390f35b34801561021857600080fd5b506102216107e1565b60405161022e9190610c0a565b60405180910390f35b34801561024357600080fd5b5061024c6107e9565b6040516102599190610c0a565b60405180910390f35b34801561026e57600080fd5b50610289600480360381019061028491906111a7565b6107f1565b6040516102969190610c0a565b60405180910390f35b3480156102ab57600080fd5b506102b4610812565b6040516102c19190610c0a565b60405180910390f35b6102e460048036038101906102df919061122a565b61081a565b6040516102f19190610e94565b60405180910390f35b34801561030657600080fd5b5061030f6109e4565b60405161031c9190610c0a565b60405180910390f35b34801561033157600080fd5b5061033a6109ec565b6040516103479190611286565b60405180910390f35b61036a600480360381019061036591906110ab565b6109f4565b6040516103779190610e94565b60405180910390f35b61039a60048036038101906103959190610f0c565b610ba6565b6040516103a99392919061110b565b60405180910390f35b3480156103be57600080fd5b506103d960048036038101906103d491906112cd565b610bca565b6040516103e69190611064565b60405180910390f35b600042905090565b60606000808484905090508067ffffffffffffffff81111561041c5761041b6112fa565b5b60405190808252806020026020018201604052801561045557816020015b610442610bd5565b81526020019060019003908161043a5790505b5092503660005b828110156105c957600085828151811061047957610478611329565b5b6020026020010151905087878381811061049657610495611329565b5b90506020028101906104a89190611367565b925060008360400135905080860195508360000160208101906104cb91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16818580606001906104f2919061138f565b604051610500929190611431565b60006040518083038185875af1925050503d806000811461053d576040519150601f19603f3d011682016040523d82523d6000602084013e610542565b606091505b5083600001846020018290528215151515815250505081516020850135176105bc577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260846000fd5b826001019250505061045c565b5082341461060c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610603906114a7565b60405180910390fd5b50505092915050565b6000606043915060008484905090508067ffffffffffffffff81111561063e5761063d6112fa565b5b60405190808252806020026020018201604052801561067157816020015b606081526020019060019003908161065c5790505b5091503660005b828110156107a157600087878381811061069557610694611329565b5b90506020028101906106a791906114c7565b92508260000160208101906106bc91906111a7565b73ffffffffffffffffffffffffffffffffffffffff168380602001906106e2919061138f565b6040516106f0929190611431565b6000604051808303816000865af19150503d806000811461072d576040519150601f19603f3d011682016040523d82523d6000602084013e610732565b606091505b5086848151811061074657610745611329565b5b60200260200101819052819250505080610795576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161078c9061153b565b60405180910390fd5b81600101915050610678565b5050509250929050565b60006001430340905090565b600046905090565b6000806060439250434091506107d68686866109f4565b905093509350939050565b600048905090565b600043905090565b60008173ffffffffffffffffffffffffffffffffffffffff16319050919050565b600044905090565b606060008383905090508067ffffffffffffffff81111561083e5761083d6112fa565b5b60405190808252806020026020018201604052801561087757816020015b610864610bd5565b81526020019060019003908161085c5790505b5091503660005b828110156109db57600084828151811061089b5761089a611329565b5b602002602001015190508686838181106108b8576108b7611329565b5b90506020028101906108ca919061155b565b92508260000160208101906108df91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060400190610905919061138f565b604051610913929190611431565b6000604051808303816000865af19150503d8060008114610950576040519150601f19603f3d011682016040523d82523d6000602084013e610955565b606091505b5082600001836020018290528215151515815250505080516020840135176109cf577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260646000fd5b8160010191505061087e565b50505092915050565b600045905090565b600041905090565b606060008383905090508067ffffffffffffffff811115610a1857610a176112fa565b5b604051908082528060200260200182016040528015610a5157816020015b610a3e610bd5565b815260200190600190039081610a365790505b5091503660005b82811015610b9c576000848281518110610a7557610a74611329565b5b60200260200101519050868683818110610a9257610a91611329565b5b9050602002810190610aa491906114c7565b9250826000016020810190610ab991906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060200190610adf919061138f565b604051610aed929190611431565b6000604051808303816000865af19150503d8060008114610b2a576040519150601f19603f3d011682016040523d82523d6000602084013e610b2f565b606091505b508260000183602001829052821515151581525050508715610b90578060000151610b8f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b869061153b565b60405180910390fd5b5b81600101915050610a58565b5050509392505050565b6000806060610bb7600186866107bf565b8093508194508295505050509250925092565b600081409050919050565b6040518060400160405280600015158152602001606081525090565b6000819050919050565b610c0481610bf1565b82525050565b6000602082019050610c1f6000830184610bfb565b92915050565b600080fd5b600080fd5b600080fd5b600080fd5b600080fd5b60008083601f840112610c5457610c53610c2f565b5b8235905067ffffffffffffffff811115610c7157610c70610c34565b5b602083019150836020820283011115610c8d57610c8c610c39565b5b9250929050565b60008060208385031215610cab57610caa610c25565b5b600083013567ffffffffffffffff811115610cc957610cc8610c2a565b5b610cd585828601610c3e565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b60008115159050919050565b610d2281610d0d565b82525050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610d62578082015181840152602081019050610d47565b83811115610d71576000848401525b50505050565b6000601f19601f8301169050919050565b6000610d9382610d28565b610d9d8185610d33565b9350610dad818560208601610d44565b610db681610d77565b840191505092915050565b6000604083016000830151610dd96000860182610d19565b5060208301518482036020860152610df18282610d88565b9150508091505092915050565b6000610e0a8383610dc1565b905092915050565b6000602082019050919050565b6000610e2a82610ce1565b610e348185610cec565b935083602082028501610e4685610cfd565b8060005b85811015610e825784840389528151610e638582610dfe565b9450610e6e83610e12565b925060208a01995050600181019050610e4a565b50829750879550505050505092915050565b60006020820190508181036000830152610eae8184610e1f565b905092915050565b60008083601f840112610ecc57610ecb610c2f565b5b8235905067ffffffffffffffff811115610ee957610ee8610c34565b5b602083019150836020820283011115610f0557610f04610c39565b5b9250929050565b60008060208385031215610f2357610f22610c25565b5b600083013567ffffffffffffffff811115610f4157610f40610c2a565b5b610f4d85828601610eb6565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b6000610f918383610d88565b905092915050565b6000602082019050919050565b6000610fb182610f59565b610fbb8185610f64565b935083602082028501610fcd85610f75565b8060005b858110156110095784840389528151610fea8582610f85565b9450610ff583610f99565b925060208a01995050600181019050610fd1565b50829750879550505050505092915050565b60006040820190506110306000830185610bfb565b81810360208301526110428184610fa6565b90509392505050565b6000819050919050565b61105e8161104b565b82525050565b60006020820190506110796000830184611055565b92915050565b61108881610d0d565b811461109357600080fd5b50565b6000813590506110a58161107f565b92915050565b6000806000604084860312156110c4576110c3610c25565b5b60006110d286828701611096565b935050602084013567ffffffffffffffff8111156110f3576110f2610c2a565b5b6110ff86828701610eb6565b92509250509250925092565b60006060820190506111206000830186610bfb565b61112d6020830185611055565b818103604083015261113f8184610e1f565b9050949350505050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061117482611149565b9050919050565b61118481611169565b811461118f57600080fd5b50565b6000813590506111a18161117b565b92915050565b6000602082840312156111bd576111bc610c25565b5b60006111cb84828501611192565b91505092915050565b60008083601f8401126111ea576111e9610c2f565b5b8235905067ffffffffffffffff81111561120757611206610c34565b5b60208301915083602082028301111561122357611222610c39565b5b9250929050565b6000806020838503121561124157611240610c25565b5b600083013567ffffffffffffffff81111561125f5761125e610c2a565b5b61126b858286016111d4565b92509250509250929050565b61128081611169565b82525050565b600060208201905061129b6000830184611277565b92915050565b6112aa81610bf1565b81146112b557600080fd5b50565b6000813590506112c7816112a1565b92915050565b6000602082840312156112e3576112e2610c25565b5b60006112f1848285016112b8565b91505092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600080fd5b600080fd5b600080fd5b60008235600160800383360303811261138357611382611358565b5b80830191505092915050565b600080833560016020038436030381126113ac576113ab611358565b5b80840192508235915067ffffffffffffffff8211156113ce576113cd61135d565b5b6020830192506001820236038313156113ea576113e9611362565b5b509250929050565b600081905092915050565b82818337600083830152505050565b600061141883856113f2565b93506114258385846113fd565b82840190509392505050565b600061143e82848661140c565b91508190509392505050565b600082825260208201905092915050565b7f4d756c746963616c6c333a2076616c7565206d69736d61746368000000000000600082015250565b6000611491601a8361144a565b915061149c8261145b565b602082019050919050565b600060208201905081810360008301526114c081611484565b9050919050565b6000823560016040038336030381126114e3576114e2611358565b5b80830191505092915050565b7f4d756c746963616c6c333a2063616c6c206661696c6564000000000000000000600082015250565b600061152560178361144a565b9150611530826114ef565b602082019050919050565b6000602082019050818103600083015261155481611518565b9050919050565b60008235600160600383360303811261157757611576611358565b5b8083019150509291505056fea264697066735822122020c1bc9aacf8e4a6507193432a895a8e77094f45a1395583f07b24e860ef06cd64736f6c634300080c0033";function Zr(e){return"string"==typeof e?{address:e,type:"json-rpc"}:e}const Wr={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},Yr={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},Kr={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};function Xr(e,{includeName:t=!1}={}){if("function"!==e.type&&"event"!==e.type&&"error"!==e.type)throw new gs(e.type);return`${e.name}(${Jr(e.inputs,{includeName:t})})`}function Jr(e,{includeName:t=!1}={}){return e?e.map(e=>function(e,{includeName:t}){if(e.type.startsWith("tuple"))return`(${Jr(e.components,{includeName:t})})${e.type.slice(5)}`;return e.type+(t&&e.name?` ${e.name}`:"")}(e,{includeName:t})).join(t?", ":","):""}class Qr extends F{constructor({docsPath:e}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join("\n"),{docsPath:e,name:"AbiConstructorNotFoundError"})}}class es extends F{constructor({docsPath:e}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join("\n"),{docsPath:e,name:"AbiConstructorParamsNotFoundError"})}}class ts extends F{constructor({data:e,params:t,size:n}){super([`Data size of ${n} bytes is too small for given parameters.`].join("\n"),{metaMessages:[`Params: (${Jr(t,{includeName:!0})})`,`Data:   ${e} (${n} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e,this.params=t,this.size=n}}class ns extends F{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class rs extends F{constructor({expectedLength:e,givenLength:t,type:n}){super([`ABI encoding array length mismatch for type ${n}.`,`Expected length: ${e}`,`Given length: ${t}`].join("\n"),{name:"AbiEncodingArrayLengthMismatchError"})}}class ss extends F{constructor({expectedSize:e,value:t}){super(`Size of bytes "${t}" (bytes${Y(t)}) does not match expected size (bytes${e}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class is extends F{constructor({expectedLength:e,givenLength:t}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${e}`,`Given length (values): ${t}`].join("\n"),{name:"AbiEncodingLengthMismatchError"})}}class os extends F{constructor(e,{docsPath:t}){super([`Arguments (\`args\`) were provided to "${e}", but "${e}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join("\n"),{docsPath:t,name:"AbiErrorInputsNotFoundError"})}}class as extends F{constructor(e,{docsPath:t}={}){super([`Error ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join("\n"),{docsPath:t,name:"AbiErrorNotFoundError"})}}class cs extends F{constructor(e,{docsPath:t}){super([`Encoded error signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${e}.`].join("\n"),{docsPath:t,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=e}}class us extends F{constructor(e,{docsPath:t}={}){super([`Function ${e?`"${e}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join("\n"),{docsPath:t,name:"AbiFunctionNotFoundError"})}}class fs extends F{constructor(e,{docsPath:t}){super([`Function "${e}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join("\n"),{docsPath:t,name:"AbiFunctionOutputsNotFoundError"})}}class ds extends F{constructor(e,{docsPath:t}){super([`Encoded function signature "${e}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${e}.`].join("\n"),{docsPath:t,name:"AbiFunctionSignatureNotFoundError"})}}class ls extends F{constructor(e,t){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${e.type}\` in \`${Xr(e.abiItem)}\`, and`,`\`${t.type}\` in \`${Xr(t.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}class hs extends F{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid encoding type.`,"Please provide a valid ABI type."].join("\n"),{docsPath:t,name:"InvalidAbiEncodingType"})}}class bs extends F{constructor(e,{docsPath:t}){super([`Type "${e}" is not a valid decoding type.`,"Please provide a valid ABI type."].join("\n"),{docsPath:t,name:"InvalidAbiDecodingType"})}}class ps extends F{constructor(e){super([`Value "${e}" is not a valid array.`].join("\n"),{name:"InvalidArrayError"})}}class gs extends F{constructor(e){super([`"${e}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join("\n"),{name:"InvalidDefinitionTypeError"})}}function ms(e,t,n,{strict:r}={}){return M(e,{strict:!1})?function(e,t,n,{strict:r}={}){ys(e,t);const s=`0x${e.replace("0x","").slice(2*(t??0),2*(n??e.length))}`;r&&ws(s,t,n);return s}(e,t,n,{strict:r}):vs(e,t,n,{strict:r})}function ys(e,t){if("number"==typeof t&&t>0&&t>Y(e)-1)throw new T({offset:t,position:"start",size:Y(e)})}function ws(e,t,n){if("number"==typeof t&&"number"==typeof n&&Y(e)!==n-t)throw new T({offset:n,position:"end",size:Y(e)})}function vs(e,t,n,{strict:r}={}){ys(e,t);const s=e.slice(t,n);return r&&ws(s,t,n),s}function xs(e){return he(ce(e))}const Ps=e=>{var t;return function(e){let t=!0,n="",r=0,s="",i=!1;for(let o=0;o<e.length;o++){const a=e[o];if(["(",")",","].includes(a)&&(t=!0),"("===a&&r++,")"===a&&r--,t)if(0!==r)" "!==a?(s+=a,n+=a):","!==e[o-1]&&","!==n&&",("!==n&&(n="",t=!1);else if(" "===a&&["event","function",""].includes(s))s="";else if(s+=a,")"===a){i=!0;break}}if(!i)throw new F("Unable to normalize signature.");return s}("string"==typeof e?e:"function"===(t=e).type?`function ${t.name}(${Ue(t.inputs)})${t.stateMutability&&"nonpayable"!==t.stateMutability?` ${t.stateMutability}`:""}${t.outputs?.length?` returns (${Ue(t.outputs)})`:""}`:"event"===t.type?`event ${t.name}(${Ue(t.inputs)})`:"error"===t.type?`error ${t.name}(${Ue(t.inputs)})`:"constructor"===t.type?`constructor(${Ue(t.inputs)})${"payable"===t.stateMutability?" payable":""}`:"fallback"===t.type?"fallback() external"+("payable"===t.stateMutability?" payable":""):"receive() external payable")};function $s(e){return xs(Ps(e))}const Es=e=>ms($s(e),0,4);class As extends F{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class Is extends F{constructor({length:e,position:t}){super(`Position \`${t}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class Bs extends F{constructor({count:e,limit:t}){super(`Recursive read limit of \`${t}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const zs={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new Bs({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new Is({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new As({offset:e});const t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new As({offset:e});const t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){const n=t??this.position;return this.assertPosition(n+e-1),this.bytes.subarray(n,n+e)},inspectUint8(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){const t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){const t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){const t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,255&e),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();const n=this.inspectBytes(e);return this.position+=t??e,n},readUint8(){this.assertReadLimit(),this._touch();const e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();const e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();const e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();const e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){const t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function Os(e,{recursiveReadLimit:t=8192}={}){const n=Object.create(zs);return n.bytes=e,n.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=t,n}function Ss(e,t={}){void 0!==t.size&&X(e,{size:t.size});return J(re(e,t),t)}function ks(e,t={}){let n=e;if(void 0!==t.size&&(X(n,{size:t.size}),n=K(n)),n.length>1||n[0]>1)throw new H(n);return Boolean(n[0])}function Ns(e,t={}){void 0!==t.size&&X(e,{size:t.size});return Q(re(e,t),t)}const Rs=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Ms(e,t){if(e.length!==t.length)throw new is({expectedLength:e.length,givenLength:t.length});const n=function({params:e,values:t}){const n=[];for(let r=0;r<e.length;r++)n.push(js({param:e[r],value:t[r]}));return n}({params:e,values:t}),r=Ls(n);return 0===r.length?"0x":r}function js({param:e,value:t}){const n=Us(e.type);if(n){const[r,s]=n;return function(e,{length:t,param:n}){const r=null===t;if(!Array.isArray(e))throw new ps(e);if(!r&&e.length!==t)throw new rs({expectedLength:t,givenLength:e.length,type:`${n.type}[${t}]`});let s=!1;const i=[];for(let t=0;t<e.length;t++){const r=js({param:n,value:e[t]});r.dynamic&&(s=!0),i.push(r)}if(r||s){const e=Ls(i);if(r){const t=se(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?be([t,e]):t}}if(s)return{dynamic:!0,encoded:e}}return{dynamic:!1,encoded:be(i.map(({encoded:e})=>e))}}(t,{length:r,param:{...e,type:s}})}if("tuple"===e.type)return function(e,{param:t}){let n=!1;const r=[];for(let s=0;s<t.components.length;s++){const i=t.components[s],o=js({param:i,value:e[Array.isArray(e)?s:i.name]});r.push(o),o.dynamic&&(n=!0)}return{dynamic:n,encoded:n?Ls(r):be(r.map(({encoded:e})=>e))}}(t,{param:e});if("address"===e.type)return function(e){if(!Be(e))throw new xe({address:e});return{dynamic:!1,encoded:V(e.toLowerCase())}}(t);if("bool"===e.type)return function(e){if("boolean"!=typeof e)throw new F(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:V(ne(e))}}(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){const n=e.type.startsWith("int"),[,,r="256"]=Rs.exec(e.type)??[];return function(e,{signed:t,size:n=256}){if("number"==typeof n){const r=2n**(BigInt(n)-(t?1n:0n))-1n,s=t?-r-1n:0n;if(e>r||e<s)throw new G({max:r.toString(),min:s.toString(),signed:t,size:n/8,value:e.toString()})}return{dynamic:!1,encoded:se(e,{size:32,signed:t})}}(t,{signed:n,size:Number(r)})}if(e.type.startsWith("bytes"))return function(e,{param:t}){const[,n]=t.type.split("bytes"),r=Y(e);if(!n){let t=e;return r%32!=0&&(t=V(t,{dir:"right",size:32*Math.ceil((e.length-2)/2/32)})),{dynamic:!0,encoded:be([V(se(r,{size:32})),t])}}if(r!==Number.parseInt(n,10))throw new ss({expectedSize:Number.parseInt(n,10),value:e});return{dynamic:!1,encoded:V(e,{dir:"right"})}}(t,{param:e});if("string"===e.type)return function(e){const t=oe(e),n=Math.ceil(Y(t)/32),r=[];for(let e=0;e<n;e++)r.push(V(ms(t,32*e,32*(e+1)),{dir:"right"}));return{dynamic:!0,encoded:be([V(se(Y(t),{size:32})),...r])}}(t);throw new hs(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function Ls(e){let t=0;for(let n=0;n<e.length;n++){const{dynamic:r,encoded:s}=e[n];t+=r?32:Y(s)}const n=[],r=[];let s=0;for(let i=0;i<e.length;i++){const{dynamic:o,encoded:a}=e[i];o?(n.push(se(t+s,{size:32})),r.push(a),s+=Y(a)):n.push(a)}return be([...n,...r])}function Us(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}function Fs(e,t){const n="string"==typeof t?de(t):t,r=Os(n);if(0===Y(n)&&e.length>0)throw new ns;if(Y(t)&&Y(t)<32)throw new ts({data:"string"==typeof t?t:re(t),params:e,size:Y(t)});let s=0;const i=[];for(let t=0;t<e.length;++t){const n=e[t];r.setPosition(s);const[o,a]=Cs(r,n,{staticPosition:0});s+=a,i.push(o)}return i}function Cs(e,t,{staticPosition:n}){const r=Us(t.type);if(r){const[s,i]=r;return function(e,t,{length:n,staticPosition:r}){if(!n){const n=r+Ns(e.readBytes(Ds)),s=n+Ts;e.setPosition(n);const i=Ns(e.readBytes(Ts)),o=qs(t);let a=0;const c=[];for(let n=0;n<i;++n){e.setPosition(s+(o?32*n:a));const[r,i]=Cs(e,t,{staticPosition:s});a+=i,c.push(r)}return e.setPosition(r+32),[c,32]}if(qs(t)){const s=r+Ns(e.readBytes(Ds)),i=[];for(let r=0;r<n;++r){e.setPosition(s+32*r);const[n]=Cs(e,t,{staticPosition:s});i.push(n)}return e.setPosition(r+32),[i,32]}let s=0;const i=[];for(let o=0;o<n;++o){const[n,o]=Cs(e,t,{staticPosition:r+s});s+=o,i.push(n)}return[i,s]}(e,{...t,type:i},{length:s,staticPosition:n})}if("tuple"===t.type)return function(e,t,{staticPosition:n}){const r=0===t.components.length||t.components.some(({name:e})=>!e),s=r?[]:{};let i=0;if(qs(t)){const o=n+Ns(e.readBytes(Ds));for(let n=0;n<t.components.length;++n){const a=t.components[n];e.setPosition(o+i);const[c,u]=Cs(e,a,{staticPosition:o});i+=u,s[r?n:a?.name]=c}return e.setPosition(n+32),[s,32]}for(let o=0;o<t.components.length;++o){const a=t.components[o],[c,u]=Cs(e,a,{staticPosition:n});s[r?o:a?.name]=c,i+=u}return[s,i]}(e,t,{staticPosition:n});if("address"===t.type)return function(e){const t=e.readBytes(32);return[$e(re(vs(t,-20))),32]}(e);if("bool"===t.type)return function(e){return[ks(e.readBytes(32),{size:32}),32]}(e);if(t.type.startsWith("bytes"))return function(e,t,{staticPosition:n}){const[r,s]=t.type.split("bytes");if(!s){const t=Ns(e.readBytes(32));e.setPosition(n+t);const r=Ns(e.readBytes(32));if(0===r)return e.setPosition(n+32),["0x",32];const s=e.readBytes(r);return e.setPosition(n+32),[re(s),32]}const i=re(e.readBytes(Number.parseInt(s,10),32));return[i,32]}(e,t,{staticPosition:n});if(t.type.startsWith("uint")||t.type.startsWith("int"))return function(e,t){const n=t.type.startsWith("int"),r=Number.parseInt(t.type.split("int")[1]||"256",10),s=e.readBytes(32);return[r>48?Ss(s,{signed:n}):Ns(s,{signed:n}),32]}(e,t);if("string"===t.type)return function(e,{staticPosition:t}){const n=Ns(e.readBytes(32)),r=t+n;e.setPosition(r);const s=Ns(e.readBytes(32));if(0===s)return e.setPosition(t+32),["",32];const i=e.readBytes(s,32),o=function(e,t={}){let n=e;return void 0!==t.size&&(X(n,{size:t.size}),n=K(n,{dir:"right"})),(new TextDecoder).decode(n)}(K(i));return e.setPosition(t+32),[o,32]}(e,{staticPosition:n});throw new bs(t.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const Ts=32,Ds=32;function qs(e){const{type:t}=e;if("string"===t)return!0;if("bytes"===t)return!0;if(t.endsWith("[]"))return!0;if("tuple"===t)return e.components?.some(qs);const n=Us(e.type);return!(!n||!qs({...e,type:n[1]}))}function _s(e){const{abi:t,data:n}=e,r=ms(n,0,4);if("0x"===r)throw new ns;const s=[...t||[],Yr,Kr].find(e=>"error"===e.type&&r===Es(Xr(e)));if(!s)throw new cs(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:s,args:"inputs"in s&&s.inputs&&s.inputs.length>0?Fs(s.inputs,ms(n,4)):void 0,errorName:s.name}}const Vs=(e,t,n)=>JSON.stringify(e,(e,t)=>"bigint"==typeof t?t.toString():t,n);function Gs({abiItem:e,args:t,includeFunctionName:n=!0,includeName:r=!1}){if("name"in e&&"inputs"in e&&e.inputs)return`${n?e.name:""}(${e.inputs.map((e,n)=>`${r&&e.name?`${e.name}: `:""}${"object"==typeof t[n]?Vs(t[n]):t[n]}`).join(", ")})`}const Hs=$s;function Zs(e){const{abi:t,args:n=[],name:r}=e,s=M(r,{strict:!1}),i=t.filter(e=>s?"function"===e.type?Es(e)===r:"event"===e.type&&Hs(e)===r:"name"in e&&e.name===r);if(0===i.length)return;if(1===i.length)return i[0];let o;for(const e of i){if(!("inputs"in e))continue;if(!n||0===n.length){if(!e.inputs||0===e.inputs.length)return e;continue}if(!e.inputs)continue;if(0===e.inputs.length)continue;if(e.inputs.length!==n.length)continue;const t=n.every((t,n)=>{const r="inputs"in e&&e.inputs[n];return!!r&&Ws(t,r)});if(t){if(o&&"inputs"in o&&o.inputs){const t=Ys(e.inputs,o.inputs,n);if(t)throw new ls({abiItem:e,type:t[0]},{abiItem:o,type:t[1]})}o=e}}return o||i[0]}function Ws(e,t){const n=typeof e,r=t.type;switch(r){case"address":return Be(e,{strict:!1});case"bool":return"boolean"===n;case"function":case"string":return"string"===n;default:return"tuple"===r&&"components"in t?Object.values(t.components).every((t,n)=>Ws(Object.values(e)[n],t)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?"number"===n||"bigint"===n:/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?"string"===n||e instanceof Uint8Array:!!/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)&&(Array.isArray(e)&&e.every(e=>Ws(e,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,"")})))}}function Ys(e,t,n){for(const r in e){const s=e[r],i=t[r];if("tuple"===s.type&&"tuple"===i.type&&"components"in s&&"components"in i)return Ys(s.components,i.components,n[r]);const o=[s.type,i.type];if((()=>!(!o.includes("address")||!o.includes("bytes20"))||(o.includes("address")&&o.includes("string")||!(!o.includes("address")||!o.includes("bytes")))&&Be(n[r],{strict:!1}))())return o}}const Ks={gwei:9,wei:18},Xs={ether:-9,wei:9};function Js(e,t){let n=e.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(t,"0");let[s,i]=[n.slice(0,n.length-t),n.slice(n.length-t)];return i=i.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${i?`.${i}`:""}`}function Qs(e,t="wei"){return Js(e,Ks[t])}function ei(e,t="wei"){return Js(e,Xs[t])}class ti extends F{constructor({address:e}){super(`State for account "${e}" is set multiple times.`,{name:"AccountStateConflictError"})}}class ni extends F{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function ri(e){return e.reduce((e,{slot:t,value:n})=>`${e}        ${t}: ${n}\n`,"")}function si(e){const t=Object.entries(e).map(([e,t])=>void 0===t||!1===t?null:[e,t]).filter(Boolean),n=t.reduce((e,[t])=>Math.max(e,t.length),0);return t.map(([e,t])=>`  ${`${e}:`.padEnd(n+1)}  ${t}`).join("\n")}class ii extends F{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join("\n"),{name:"FeeConflictError"})}}class oi extends F{constructor(e,{account:t,docsPath:n,chain:r,data:s,gas:i,gasPrice:o,maxFeePerGas:a,maxPriorityFeePerGas:c,nonce:u,to:f,value:d,stateOverride:l}){const h=t?Zr(t):void 0;let b=si({from:h?.address,to:f,value:void 0!==d&&`${Qs(d)} ${r?.nativeCurrency?.symbol||"ETH"}`,data:s,gas:i,gasPrice:void 0!==o&&`${ei(o)} gwei`,maxFeePerGas:void 0!==a&&`${ei(a)} gwei`,maxPriorityFeePerGas:void 0!==c&&`${ei(c)} gwei`,nonce:u});l&&(b+=`\n${function(e){return e.reduce((e,{address:t,...n})=>{let r=`${e}    ${t}:\n`;return n.nonce&&(r+=`      nonce: ${n.nonce}\n`),n.balance&&(r+=`      balance: ${n.balance}\n`),n.code&&(r+=`      code: ${n.code}\n`),n.state&&(r+="      state:\n",r+=ri(n.state)),n.stateDiff&&(r+="      stateDiff:\n",r+=ri(n.stateDiff)),r},"  State Override:\n").slice(0,-1)}(l)}`),super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Raw Call Arguments:",b].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class ai extends F{constructor(e,{abi:t,args:n,contractAddress:r,docsPath:s,functionName:i,sender:o}){const a=Zs({abi:t,args:n,name:i}),c=a?Gs({abiItem:a,args:n,includeFunctionName:!1,includeName:!1}):void 0,u=si({address:r&&r,function:a?Xr(a,{includeName:!0}):void 0,args:c&&"()"!==c&&`${[...Array(i?.length??0).keys()].map(()=>" ").join("")}${c}`,sender:o});super(e.shortMessage||`An unknown error occurred while executing the contract function "${i}".`,{cause:e,docsPath:s,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],u&&"Contract Call:",u].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=t,this.args=n,this.cause=e,this.contractAddress=r,this.functionName=i,this.sender=o}}class ci extends F{constructor({abi:e,data:t,functionName:n,message:r}){let s,i,o,a,c;if(t&&"0x"!==t)try{i=_s({abi:e,data:t});const{abiItem:n,errorName:r,args:s}=i;if("Error"===r)a=s[0];else if("Panic"===r){const[e]=s;a=Wr[e]}else{const e=n?Xr(n,{includeName:!0}):void 0,t=n&&s?Gs({abiItem:n,args:s,includeFunctionName:!1,includeName:!1}):void 0;o=[e?`Error: ${e}`:"",t&&"()"!==t?`       ${[...Array(r?.length??0).keys()].map(()=>" ").join("")}${t}`:""]}}catch(e){s=e}else r&&(a=r);s instanceof cs&&(c=s.signature,o=[`Unable to decode signature "${c}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${c}.`]),super(a&&"execution reverted"!==a||c?[`The contract function "${n}" reverted with the following ${c?"signature":"reason"}:`,a||c].join("\n"):`The contract function "${n}" reverted.`,{cause:s,metaMessages:o,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=i,this.raw=t,this.reason=a,this.signature=c}}class ui extends F{constructor({functionName:e}){super(`The contract function "${e}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${e}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class fi extends F{constructor({factory:e}){super("Deployment for counterfactual contract call failed"+(e?` for factory "${e}".`:""),{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class di extends F{constructor({data:e,message:t}){super(t||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=e}}const li="/docs/contract/encodeDeployData";function hi(e){const{abi:t,args:n,bytecode:r}=e;if(!n||0===n.length)return r;const s=t.find(e=>"type"in e&&"constructor"===e.type);if(!s)throw new Qr({docsPath:li});if(!("inputs"in s))throw new es({docsPath:li});if(!s.inputs||0===s.inputs.length)throw new es({docsPath:li});return pe([r,Ms(s.inputs,n)])}const bi="/docs/contract/encodeFunctionData";function pi(e){const{args:t}=e,{abi:n,functionName:r}=1===e.abi.length&&e.functionName?.startsWith("0x")?e:function(e){const{abi:t,args:n,functionName:r}=e;let s=t[0];if(r){const e=Zs({abi:t,args:n,name:r});if(!e)throw new us(r,{docsPath:bi});s=e}if("function"!==s.type)throw new us(void 0,{docsPath:bi});return{abi:[s],functionName:Es(Xr(s))}}(e),s=n[0];return pe([r,("inputs"in s&&s.inputs?Ms(s.inputs,t??[]):void 0)??"0x"])}function gi(e){if(0===e||1===e)return e;if(27===e)return 0;if(28===e)return 1;throw new Error("Invalid yParityOrV value")}async function mi({hash:e,signature:t}){return n=await async function({hash:e,signature:t}){const n=M(e)?e:te(e),{secp256k1:r}=await Promise.resolve().then(function(){return fa});return`0x${(()=>{if("object"==typeof t&&"r"in t&&"s"in t){const{r:e,s:n,v:s,yParity:i}=t,o=gi(Number(i??s));return new r.Signature(J(e),J(n)).addRecoveryBit(o)}const e=M(t)?t:te(t);if(65!==Y(e))throw new Error("invalid signature length");const n=gi(Q(`0x${e.slice(130)}`));return r.Signature.fromCompact(e.substring(2,130)).addRecoveryBit(n)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}({hash:e,signature:t}),$e(`0x${he(`0x${n.substring(4)}`).substring(26)}`);var n}function yi(e,t="hex"){const n=wi(e),r=Os(new Uint8Array(n.length));return n.encode(r),"hex"===t?re(r.bytes):r.bytes}function wi(e){return Array.isArray(e)?function(e){const t=e.reduce((e,t)=>e+t.length,0),n=vi(t);return{length:t<=55?1+t:1+n+t,encode(r){t<=55?r.pushByte(192+t):(r.pushByte(247+n),1===n?r.pushUint8(t):2===n?r.pushUint16(t):3===n?r.pushUint24(t):r.pushUint32(t));for(const{encode:t}of e)t(r)}}}(e.map(e=>wi(e))):function(e){const t="string"==typeof e?de(e):e,n=vi(t.length),r=1===t.length&&t[0]<128?1:t.length<=55?1+t.length:1+n+t.length;return{length:r,encode(e){1===t.length&&t[0]<128?e.pushBytes(t):t.length<=55?(e.pushByte(128+t.length),e.pushBytes(t)):(e.pushByte(183+n),1===n?e.pushUint8(t.length):2===n?e.pushUint16(t.length):3===n?e.pushUint24(t.length):e.pushUint32(t.length),e.pushBytes(t))}}}(e)}function vi(e){if(e<256)return 1;if(e<65536)return 2;if(e<2**24)return 3;if(e<2**32)return 4;throw new F("Length is too large.")}function xi(e){const{chainId:t,nonce:n,to:r}=e,s=e.contractAddress??e.address,i=he(pe(["0x05",yi([t?se(t):"0x",s,n?se(n):"0x"])]));return"bytes"===r?de(i):i}async function Pi({address:e,authorization:t,signature:n}){return ze(Ee(e),await async function(e){const{authorization:t,signature:n}=e;return mi({hash:xi(t),signature:n??t})}({authorization:t,signature:n}))}function $i(e,t,n){const r=e[t.name];if("function"==typeof r)return r;const s=e[n];return"function"==typeof s?s:n=>t(e,n)}function Ei(e,t,n){return e&t^~e&n}function Ai(e,t,n){return e&t^e&n^t&n}class Ii extends p{constructor(e,t,n,r){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.buffer=new Uint8Array(e),this.view=f(this.buffer)}update(e){a(this),o(e=b(e));const{view:t,buffer:n,blockLen:r}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){const t=f(e);for(;r<=s-i;i+=r)this.process(t,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){a(this),c(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:s}=this;let{pos:i}=this;t[i++]=128,u(this.buffer.subarray(i)),this.padOffset>r-i&&(this.process(n,0),i=0);for(let e=i;e<r;e++)t[e]=0;!function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,u=r?0:4;e.setUint32(t+c,o,r),e.setUint32(t+u,a,r)}(n,r-8,BigInt(8*this.length),s),this.process(n,0);const o=f(e),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=d/4,h=this.get();if(l>h.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)o.setUint32(4*e,h[e],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:s,destroyed:i,pos:o}=this;return e.destroyed=i,e.finished=s,e.length=r,e.pos=o,r%t&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const Bi=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),zi=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Oi=new Uint32Array(64);class Si extends Ii{constructor(e=32){super(64,e,8,!1),this.A=0|Bi[0],this.B=0|Bi[1],this.C=0|Bi[2],this.D=0|Bi[3],this.E=0|Bi[4],this.F=0|Bi[5],this.G=0|Bi[6],this.H=0|Bi[7]}get(){const{A:e,B:t,C:n,D:r,E:s,F:i,G:o,H:a}=this;return[e,t,n,r,s,i,o,a]}set(e,t,n,r,s,i,o,a){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|s,this.F=0|i,this.G=0|o,this.H=0|a}process(e,t){for(let n=0;n<16;n++,t+=4)Oi[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=Oi[e-15],n=Oi[e-2],r=d(t,7)^d(t,18)^t>>>3,s=d(n,17)^d(n,19)^n>>>10;Oi[e]=s+Oi[e-7]+r+Oi[e-16]|0}let{A:n,B:r,C:s,D:i,E:o,F:a,G:c,H:u}=this;for(let e=0;e<64;e++){const t=u+(d(o,6)^d(o,11)^d(o,25))+Ei(o,a,c)+zi[e]+Oi[e]|0,f=(d(n,2)^d(n,13)^d(n,22))+Ai(n,r,s)|0;u=c,c=a,a=o,o=i+t|0,i=s,s=r,r=n,n=t+f|0}n=n+this.A|0,r=r+this.B|0,s=s+this.C|0,i=i+this.D|0,o=o+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(n,r,s,i,o,a,c,u)}roundClean(){u(Oi)}destroy(){this.set(0,0,0,0,0,0,0,0),u(this.buffer)}}const ki=g(()=>new Si);class Ni extends p{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.createHasher");i(e.outputLen),i(e.blockLen)}(e);const n=b(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,s=new Uint8Array(r);s.set(n.length>r?e.create().update(n).digest():n);for(let e=0;e<s.length;e++)s[e]^=54;this.iHash.update(s),this.oHash=e.create();for(let e=0;e<s.length;e++)s[e]^=106;this.oHash.update(s),u(s)}update(e){return a(this),this.iHash.update(e),this}digestInto(e){a(this),o(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:s,blockLen:i,outputLen:o}=this;return e.finished=r,e.destroyed=s,e.blockLen=i,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Ri=(e,t,n)=>new Ni(e,t).update(n).digest();Ri.create=(e,t)=>new Ni(e,t);
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const Mi=BigInt(0),ji=BigInt(1);function Li(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function Ui(e){if(!Li(e))throw new Error("Uint8Array expected")}function Fi(e,t){if("boolean"!=typeof t)throw new Error(e+" boolean expected, got "+t)}function Ci(e){const t=e.toString(16);return 1&t.length?"0"+t:t}function Ti(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?Mi:BigInt("0x"+e)}const Di="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,qi=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function _i(e){if(Ui(e),Di)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=qi[e[n]];return t}const Vi=48,Gi=57,Hi=65,Zi=70,Wi=97,Yi=102;function Ki(e){return e>=Vi&&e<=Gi?e-Vi:e>=Hi&&e<=Zi?e-(Hi-10):e>=Wi&&e<=Yi?e-(Wi-10):void 0}function Xi(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);if(Di)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let t=0,s=0;t<n;t++,s+=2){const n=Ki(e.charCodeAt(s)),i=Ki(e.charCodeAt(s+1));if(void 0===n||void 0===i){const t=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+s)}r[t]=16*n+i}return r}function Ji(e){return Ti(_i(e))}function Qi(e){return Ui(e),Ti(_i(Uint8Array.from(e).reverse()))}function eo(e,t){return Xi(e.toString(16).padStart(2*t,"0"))}function to(e,t){return eo(e,t).reverse()}function no(e,t,n){let r;if("string"==typeof t)try{r=Xi(t)}catch(t){throw new Error(e+" must be hex string or Uint8Array, cause: "+t)}else{if(!Li(t))throw new Error(e+" must be hex string or Uint8Array");r=Uint8Array.from(t)}const s=r.length;if("number"==typeof n&&s!==n)throw new Error(e+" of length "+n+" expected, got "+s);return r}function ro(...e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];Ui(r),t+=r.length}const n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const s=e[t];n.set(s,r),r+=s.length}return n}const so=e=>"bigint"==typeof e&&Mi<=e;function io(e,t,n){return so(e)&&so(t)&&so(n)&&t<=e&&e<n}function oo(e,t,n,r){if(!io(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}const ao=e=>(ji<<BigInt(e))-ji,co=e=>new Uint8Array(e),uo=e=>Uint8Array.from(e);const fo={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||Li(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function lo(e,t,n={}){const r=(t,n,r)=>{const s=fo[n];if("function"!=typeof s)throw new Error("invalid validator function");const i=e[t];if(!(r&&void 0===i||s(i,e)))throw new Error("param "+String(t)+" is invalid. Expected "+n+", got "+i)};for(const[e,n]of Object.entries(t))r(e,n,!1);for(const[e,t]of Object.entries(n))r(e,t,!0);return e}function ho(e){const t=new WeakMap;return(n,...r)=>{const s=t.get(n);if(void 0!==s)return s;const i=e(n,...r);return t.set(n,i),i}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const bo=BigInt(0),po=BigInt(1),go=BigInt(2),mo=BigInt(3),yo=BigInt(4),wo=BigInt(5),vo=BigInt(8);function xo(e,t){const n=e%t;return n>=bo?n:t+n}function Po(e,t,n){let r=e;for(;t-- >bo;)r*=r,r%=n;return r}function $o(e,t){if(e===bo)throw new Error("invert: expected non-zero number");if(t<=bo)throw new Error("invert: expected positive modulus, got "+t);let n=xo(e,t),r=t,s=bo,i=po;for(;n!==bo;){const e=r%n,t=s-i*(r/n);r=n,n=e,s=i,i=t}if(r!==po)throw new Error("invert: does not exist");return xo(s,t)}function Eo(e,t){const n=(e.ORDER+po)/yo,r=e.pow(t,n);if(!e.eql(e.sqr(r),t))throw new Error("Cannot find square root");return r}function Ao(e,t){const n=(e.ORDER-wo)/vo,r=e.mul(t,go),s=e.pow(r,n),i=e.mul(t,s),o=e.mul(e.mul(i,go),s),a=e.mul(i,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),t))throw new Error("Cannot find square root");return a}function Io(e){return e%yo===mo?Eo:e%vo===wo?Ao:function(e){if(e<BigInt(3))throw new Error("sqrt is not defined for small field");let t=e-po,n=0;for(;t%go===bo;)t/=go,n++;let r=go;const s=ko(e);for(;1===Oo(s,r);)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(1===n)return Eo;let i=s.pow(r,t);const o=(t+po)/go;return function(e,r){if(e.is0(r))return r;if(1!==Oo(e,r))throw new Error("Cannot find square root");let s=n,a=e.mul(e.ONE,i),c=e.pow(r,t),u=e.pow(r,o);for(;!e.eql(c,e.ONE);){if(e.is0(c))return e.ZERO;let t=1,n=e.sqr(c);for(;!e.eql(n,e.ONE);)if(t++,n=e.sqr(n),t===s)throw new Error("Cannot find square root");const r=po<<BigInt(s-t-1),i=e.pow(a,r);s=t,a=e.sqr(i),c=e.mul(c,a),u=e.mul(u,i)}return u}}(e)}const Bo=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function zo(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),s=t.reduce((t,n,s)=>e.is0(n)?t:(r[s]=t,e.mul(t,n)),e.ONE),i=e.inv(s);return t.reduceRight((t,n,s)=>e.is0(n)?t:(r[s]=e.mul(t,r[s]),e.mul(t,n)),i),r}function Oo(e,t){const n=(e.ORDER-po)/go,r=e.pow(t,n),s=e.eql(r,e.ONE),i=e.eql(r,e.ZERO),o=e.eql(r,e.neg(e.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function So(e,t){void 0!==t&&i(t);const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function ko(e,t,n=!1,r={}){if(e<=bo)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:s,nByteLength:i}=So(e,t);if(i>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o;const a=Object.freeze({ORDER:e,isLE:n,BITS:s,BYTES:i,MASK:ao(s),ZERO:bo,ONE:po,create:t=>xo(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("invalid field element: expected bigint, got "+typeof t);return bo<=t&&t<e},is0:e=>e===bo,isOdd:e=>(e&po)===po,neg:t=>xo(-t,e),eql:(e,t)=>e===t,sqr:t=>xo(t*t,e),add:(t,n)=>xo(t+n,e),sub:(t,n)=>xo(t-n,e),mul:(t,n)=>xo(t*n,e),pow:(e,t)=>function(e,t,n){if(n<bo)throw new Error("invalid exponent, negatives unsupported");if(n===bo)return e.ONE;if(n===po)return t;let r=e.ONE,s=t;for(;n>bo;)n&po&&(r=e.mul(r,s)),s=e.sqr(s),n>>=po;return r}(a,e,t),div:(t,n)=>xo(t*$o(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>$o(t,e),sqrt:r.sqrt||(t=>(o||(o=Io(e)),o(a,t))),toBytes:e=>n?to(e,i):eo(e,i),fromBytes:e=>{if(e.length!==i)throw new Error("Field.fromBytes: expected "+i+" bytes, got "+e.length);return n?Qi(e):Ji(e)},invertBatch:e=>zo(a,e),cmov:(e,t,n)=>n?t:e});return Object.freeze(a)}function No(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Ro(e){const t=No(e);return t+Math.ceil(t/2)}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const Mo=BigInt(0),jo=BigInt(1);function Lo(e,t){const n=t.negate();return e?n:t}function Uo(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Fo(e,t){Uo(e,t);const n=2**e;return{windows:Math.ceil(t/e)+1,windowSize:2**(e-1),mask:ao(e),maxNumber:n,shiftBy:BigInt(e)}}function Co(e,t,n){const{windowSize:r,mask:s,maxNumber:i,shiftBy:o}=n;let a=Number(e&s),c=e>>o;a>r&&(a-=i,c+=jo);const u=t*r;return{nextN:c,offset:u+Math.abs(a)-1,isZero:0===a,isNeg:a<0,isNegF:t%2!=0,offsetF:u}}const To=new WeakMap,Do=new WeakMap;function qo(e){return Do.get(e)||1}function _o(e,t,n,r){!function(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((e,n)=>{if(!(e instanceof t))throw new Error("invalid point at index "+n)})}(n,e),function(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((e,n)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+n)})}(r,t);const s=n.length,i=r.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=e.ZERO,a=function(e){let t;for(t=0;e>Mi;e>>=ji,t+=1);return t}(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=ao(c),f=new Array(Number(u)+1).fill(o);let d=o;for(let e=Math.floor((t.BITS-1)/c)*c;e>=0;e-=c){f.fill(o);for(let t=0;t<i;t++){const s=r[t],i=Number(s>>BigInt(e)&u);f[i]=f[i].add(n[t])}let t=o;for(let e=f.length-1,n=o;e>0;e--)n=n.add(f[e]),t=t.add(n);if(d=d.add(t),0!==e)for(let e=0;e<c;e++)d=d.double()}return d}function Vo(e){return lo(e.Fp,Bo.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),lo(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...So(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Go(e){void 0!==e.lowS&&Fi("lowS",e.lowS),void 0!==e.prehash&&Fi("prehash",e.prehash)}class Ho extends Error{constructor(e=""){super(e)}}const Zo={Err:Ho,_tlv:{encode:(e,t)=>{const{Err:n}=Zo;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(1&t.length)throw new n("tlv.encode: unpadded data");const r=t.length/2,s=Ci(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const i=r>127?Ci(s.length/2|128):"";return Ci(e)+i+s+t},decode(e,t){const{Err:n}=Zo;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const s=t[r++];let i=0;if(!!(128&s)){const e=127&s;if(!e)throw new n("tlv.decode(long): indefinite length not supported");if(e>4)throw new n("tlv.decode(long): byte length is too big");const o=t.subarray(r,r+e);if(o.length!==e)throw new n("tlv.decode: length bytes not complete");if(0===o[0])throw new n("tlv.decode(long): zero leftmost byte");for(const e of o)i=i<<8|e;if(r+=e,i<128)throw new n("tlv.decode(long): not minimal encoding")}else i=s;const o=t.subarray(r,r+i);if(o.length!==i)throw new n("tlv.decode: wrong value length");return{v:o,l:t.subarray(r+i)}}},_int:{encode(e){const{Err:t}=Zo;if(e<Yo)throw new t("integer: negative integers are not allowed");let n=Ci(e);if(8&Number.parseInt(n[0],16)&&(n="00"+n),1&n.length)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=Zo;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return Ji(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=Zo,s=no("signature",e),{v:i,l:o}=r.decode(48,s);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,i),{v:u,l:f}=r.decode(2,c);if(f.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(u)}},hexFromSig(e){const{_tlv:t,_int:n}=Zo,r=t.encode(2,n.encode(e.r))+t.encode(2,n.encode(e.s));return t.encode(48,r)}};function Wo(e,t){return _i(eo(e,t))}const Yo=BigInt(0),Ko=BigInt(1);BigInt(2);const Xo=BigInt(3),Jo=BigInt(4);function Qo(e){const t=function(e){const t=Vo(e);lo(t,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:n,Fp:r,a:s}=t;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...t})}(e),{Fp:n}=t,r=ko(t.n,t.nBitLength),s=t.toBytes||((e,t,r)=>{const s=t.toAffine();return ro(Uint8Array.from([4]),n.toBytes(s.x),n.toBytes(s.y))}),i=t.fromBytes||(e=>{const t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function o(e){const{a:r,b:s}=t,i=n.sqr(e),o=n.mul(i,e);return n.add(n.add(o,n.mul(e,r)),s)}function a(e,t){const r=n.sqr(t),s=o(e);return n.eql(r,s)}if(!a(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const c=n.mul(n.pow(t.a,Xo),Jo),u=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(c,u)))throw new Error("bad curve params: a or b");function f(e){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:s,n:i}=t;if(n&&"bigint"!=typeof e){if(Li(e)&&(e=_i(e)),"string"!=typeof e||!n.includes(e.length))throw new Error("invalid private key");e=e.padStart(2*r,"0")}let o;try{o="bigint"==typeof e?e:Ji(no("private key",e,r))}catch(t){throw new Error("invalid private key, expected hex or "+r+" bytes, got "+typeof e)}return s&&(o=xo(o,i)),oo("private key",o,Ko,i),o}function d(e){if(!(e instanceof b))throw new Error("ProjectivePoint expected")}const l=ho((e,t)=>{const{px:r,py:s,pz:i}=e;if(n.eql(i,n.ONE))return{x:r,y:s};const o=e.is0();null==t&&(t=o?n.ONE:n.inv(i));const a=n.mul(r,t),c=n.mul(s,t),u=n.mul(i,t);if(o)return{x:n.ZERO,y:n.ZERO};if(!n.eql(u,n.ONE))throw new Error("invZ was invalid");return{x:a,y:c}}),h=ho(e=>{if(e.is0()){if(t.allowInfinityPoint&&!n.is0(e.py))return;throw new Error("bad point: ZERO")}const{x:r,y:s}=e.toAffine();if(!n.isValid(r)||!n.isValid(s))throw new Error("bad point: x or y not FE");if(!a(r,s))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class b{constructor(e,t,r){if(null==e||!n.isValid(e))throw new Error("x required");if(null==t||!n.isValid(t)||n.is0(t))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required");this.px=e,this.py=t,this.pz=r,Object.freeze(this)}static fromAffine(e){const{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw new Error("invalid affine point");if(e instanceof b)throw new Error("projective point not allowed");const s=e=>n.eql(e,n.ZERO);return s(t)&&s(r)?b.ZERO:new b(t,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=zo(n,e.map(e=>e.pz));return e.map((e,n)=>e.toAffine(t[n])).map(b.fromAffine)}static fromHex(e){const t=b.fromAffine(i(no("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return b.BASE.multiply(f(e))}static msm(e,t){return _o(b,r,e,t)}_setWindowSize(e){m.setWindowSize(this,e)}assertValidity(){h(this)}hasEvenY(){const{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){d(e);const{px:t,py:r,pz:s}=this,{px:i,py:o,pz:a}=e,c=n.eql(n.mul(t,a),n.mul(i,s)),u=n.eql(n.mul(r,a),n.mul(o,s));return c&&u}negate(){return new b(this.px,n.neg(this.py),this.pz)}double(){const{a:e,b:r}=t,s=n.mul(r,Xo),{px:i,py:o,pz:a}=this;let c=n.ZERO,u=n.ZERO,f=n.ZERO,d=n.mul(i,i),l=n.mul(o,o),h=n.mul(a,a),p=n.mul(i,o);return p=n.add(p,p),f=n.mul(i,a),f=n.add(f,f),c=n.mul(e,f),u=n.mul(s,h),u=n.add(c,u),c=n.sub(l,u),u=n.add(l,u),u=n.mul(c,u),c=n.mul(p,c),f=n.mul(s,f),h=n.mul(e,h),p=n.sub(d,h),p=n.mul(e,p),p=n.add(p,f),f=n.add(d,d),d=n.add(f,d),d=n.add(d,h),d=n.mul(d,p),u=n.add(u,d),h=n.mul(o,a),h=n.add(h,h),d=n.mul(h,p),c=n.sub(c,d),f=n.mul(h,l),f=n.add(f,f),f=n.add(f,f),new b(c,u,f)}add(e){d(e);const{px:r,py:s,pz:i}=this,{px:o,py:a,pz:c}=e;let u=n.ZERO,f=n.ZERO,l=n.ZERO;const h=t.a,p=n.mul(t.b,Xo);let g=n.mul(r,o),m=n.mul(s,a),y=n.mul(i,c),w=n.add(r,s),v=n.add(o,a);w=n.mul(w,v),v=n.add(g,m),w=n.sub(w,v),v=n.add(r,i);let x=n.add(o,c);return v=n.mul(v,x),x=n.add(g,y),v=n.sub(v,x),x=n.add(s,i),u=n.add(a,c),x=n.mul(x,u),u=n.add(m,y),x=n.sub(x,u),l=n.mul(h,v),u=n.mul(p,y),l=n.add(u,l),u=n.sub(m,l),l=n.add(m,l),f=n.mul(u,l),m=n.add(g,g),m=n.add(m,g),y=n.mul(h,y),v=n.mul(p,v),m=n.add(m,y),y=n.sub(g,y),y=n.mul(h,y),v=n.add(v,y),g=n.mul(m,v),f=n.add(f,g),g=n.mul(x,v),u=n.mul(w,u),u=n.sub(u,g),g=n.mul(w,m),l=n.mul(x,l),l=n.add(l,g),new b(u,f,l)}subtract(e){return this.add(e.negate())}is0(){return this.equals(b.ZERO)}wNAF(e){return m.wNAFCached(this,e,b.normalizeZ)}multiplyUnsafe(e){const{endo:r,n:s}=t;oo("scalar",e,Yo,s);const i=b.ZERO;if(e===Yo)return i;if(this.is0()||e===Ko)return this;if(!r||m.hasPrecomputes(this))return m.wNAFCachedUnsafe(this,e,b.normalizeZ);let{k1neg:o,k1:a,k2neg:c,k2:u}=r.splitScalar(e),f=i,d=i,l=this;for(;a>Yo||u>Yo;)a&Ko&&(f=f.add(l)),u&Ko&&(d=d.add(l)),l=l.double(),a>>=Ko,u>>=Ko;return o&&(f=f.negate()),c&&(d=d.negate()),d=new b(n.mul(d.px,r.beta),d.py,d.pz),f.add(d)}multiply(e){const{endo:r,n:s}=t;let i,o;if(oo("scalar",e,Ko,s),r){const{k1neg:t,k1:s,k2neg:a,k2:c}=r.splitScalar(e);let{p:u,f:f}=this.wNAF(s),{p:d,f:l}=this.wNAF(c);u=m.constTimeNegate(t,u),d=m.constTimeNegate(a,d),d=new b(n.mul(d.px,r.beta),d.py,d.pz),i=u.add(d),o=f.add(l)}else{const{p:t,f:n}=this.wNAF(e);i=t,o=n}return b.normalizeZ([i,o])[0]}multiplyAndAddUnsafe(e,t,n){const r=b.BASE,s=(e,t)=>t!==Yo&&t!==Ko&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),i=s(this,t).add(s(e,n));return i.is0()?void 0:i}toAffine(e){return l(this,e)}isTorsionFree(){const{h:e,isTorsionFree:n}=t;if(e===Ko)return!0;if(n)return n(b,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:n}=t;return e===Ko?this:n?n(b,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return Fi("isCompressed",e),this.assertValidity(),s(b,this,e)}toHex(e=!0){return Fi("isCompressed",e),_i(this.toRawBytes(e))}}b.BASE=new b(t.Gx,t.Gy,n.ONE),b.ZERO=new b(n.ZERO,n.ONE,n.ZERO);const{endo:p,nBitLength:g}=t,m=(y=b,w=p?Math.ceil(g/2):g,{constTimeNegate:Lo,hasPrecomputes:e=>1!==qo(e),unsafeLadder(e,t,n=y.ZERO){let r=e;for(;t>Mo;)t&jo&&(n=n.add(r)),r=r.double(),t>>=jo;return n},precomputeWindow(e,t){const{windows:n,windowSize:r}=Fo(t,w),s=[];let i=e,o=i;for(let e=0;e<n;e++){o=i,s.push(o);for(let e=1;e<r;e++)o=o.add(i),s.push(o);i=o.double()}return s},wNAF(e,t,n){let r=y.ZERO,s=y.BASE;const i=Fo(e,w);for(let e=0;e<i.windows;e++){const{nextN:o,offset:a,isZero:c,isNeg:u,isNegF:f,offsetF:d}=Co(n,e,i);n=o,c?s=s.add(Lo(f,t[d])):r=r.add(Lo(u,t[a]))}return{p:r,f:s}},wNAFUnsafe(e,t,n,r=y.ZERO){const s=Fo(e,w);for(let e=0;e<s.windows&&n!==Mo;e++){const{nextN:i,offset:o,isZero:a,isNeg:c}=Co(n,e,s);if(n=i,!a){const e=t[o];r=r.add(c?e.negate():e)}}return r},getPrecomputes(e,t,n){let r=To.get(t);return r||(r=this.precomputeWindow(t,e),1!==e&&To.set(t,n(r))),r},wNAFCached(e,t,n){const r=qo(e);return this.wNAF(r,this.getPrecomputes(r,e,n),t)},wNAFCachedUnsafe(e,t,n,r){const s=qo(e);return 1===s?this.unsafeLadder(e,t,r):this.wNAFUnsafe(s,this.getPrecomputes(s,e,n),t,r)},setWindowSize(e,t){Uo(t,w),Do.set(e,t),To.delete(e)}});var y,w;return{CURVE:t,ProjectivePoint:b,normPrivateKeyToScalar:f,weierstrassEquation:o,isWithinCurveOrder:function(e){return io(e,Ko,t.n)}}}function ea(e){const t=function(e){const t=Vo(e);return lo(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:n,n:r,nByteLength:s,nBitLength:i}=t,o=n.BYTES+1,a=2*n.BYTES+1;function c(e){return xo(e,r)}function u(e){return $o(e,r)}const{ProjectivePoint:f,normPrivateKeyToScalar:d,weierstrassEquation:l,isWithinCurveOrder:h}=Qo({...t,toBytes(e,t,r){const s=t.toAffine(),i=n.toBytes(s.x),o=ro;return Fi("isCompressed",r),r?o(Uint8Array.from([t.hasEvenY()?2:3]),i):o(Uint8Array.from([4]),i,n.toBytes(s.y))},fromBytes(e){const t=e.length,r=e[0],s=e.subarray(1);if(t!==o||2!==r&&3!==r){if(t===a&&4===r){return{x:n.fromBytes(s.subarray(0,n.BYTES)),y:n.fromBytes(s.subarray(n.BYTES,2*n.BYTES))}}throw new Error("invalid Point, expected length of "+o+", or uncompressed "+a+", got "+t)}{const e=Ji(s);if(!io(e,Ko,n.ORDER))throw new Error("Point is not on curve");const t=l(e);let i;try{i=n.sqrt(t)}catch(e){const t=e instanceof Error?": "+e.message:"";throw new Error("Point is not on curve"+t)}return!(1&~r)!==((i&Ko)===Ko)&&(i=n.neg(i)),{x:e,y:i}}}});function b(e){return e>r>>Ko}const p=(e,t,n)=>Ji(e.slice(t,n));class g{constructor(e,t,n){oo("r",e,Ko,r),oo("s",t,Ko,r),this.r=e,this.s=t,null!=n&&(this.recovery=n),Object.freeze(this)}static fromCompact(e){const t=s;return e=no("compactSignature",e,2*t),new g(p(e,0,t),p(e,t,2*t))}static fromDER(e){const{r:t,s:n}=Zo.toSig(no("DER",e));return new g(t,n)}assertValidity(){}addRecoveryBit(e){return new g(this.r,this.s,e)}recoverPublicKey(e){const{r:r,s:s,recovery:i}=this,o=v(no("msgHash",e));if(null==i||![0,1,2,3].includes(i))throw new Error("recovery id invalid");const a=2===i||3===i?r+t.n:r;if(a>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const d=1&i?"03":"02",l=f.fromHex(d+Wo(a,n.BYTES)),h=u(a),b=c(-o*h),p=c(s*h),g=f.BASE.multiplyAndAddUnsafe(l,b,p);if(!g)throw new Error("point at infinify");return g.assertValidity(),g}hasHighS(){return b(this.s)}normalizeS(){return this.hasHighS()?new g(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return Xi(this.toDERHex())}toDERHex(){return Zo.hexFromSig(this)}toCompactRawBytes(){return Xi(this.toCompactHex())}toCompactHex(){const e=s;return Wo(this.r,e)+Wo(this.s,e)}}const m={isValidPrivateKey(e){try{return d(e),!0}catch(e){return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{const e=Ro(t.n);return function(e,t,n=!1){const r=e.length,s=No(t),i=Ro(t);if(r<16||r<i||r>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+r);const o=xo(n?Qi(e):Ji(e),t-po)+po;return n?to(o,s):eo(o,s)}(t.randomBytes(e),t.n)},precompute:(e=8,t=f.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function y(e){if("bigint"==typeof e)return!1;if(e instanceof f)return!0;const r=no("key",e).length,i=n.BYTES,o=i+1,a=2*i+1;return t.allowedPrivateKeyLengths||s===o?void 0:r===o||r===a}const w=t.bits2int||function(e){if(e.length>8192)throw new Error("input is too large");const t=Ji(e),n=8*e.length-i;return n>0?t>>BigInt(n):t},v=t.bits2int_modN||function(e){return c(w(e))},x=ao(i);function P(e){return oo("num < 2^"+i,e,Yo,x),eo(e,s)}function $(e,r,s=E){if(["recovered","canonical"].some(e=>e in s))throw new Error("sign() legacy options not supported");const{hash:i,randomBytes:o}=t;let{lowS:a,prehash:l,extraEntropy:p}=s;null==a&&(a=!0),e=no("msgHash",e),Go(s),l&&(e=no("prehashed msgHash",i(e)));const m=v(e),y=d(r),x=[P(y),P(m)];if(null!=p&&!1!==p){const e=!0===p?o(n.BYTES):p;x.push(no("extraEntropy",e))}const $=ro(...x),A=m;return{seed:$,k2sig:function(e){const t=w(e);if(!h(t))return;const n=u(t),r=f.BASE.multiply(t).toAffine(),s=c(r.x);if(s===Yo)return;const i=c(n*c(A+s*y));if(i===Yo)return;let o=(r.x===s?0:2)|Number(r.y&Ko),d=i;return a&&b(i)&&(d=function(e){return b(e)?c(-e):e}(i),o^=1),new g(s,d,o)}}}const E={lowS:t.lowS,prehash:!1},A={lowS:t.lowS,prehash:!1};return f.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return f.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,n=!0){if(!0===y(e))throw new Error("first arg must be private key");if(!1===y(t))throw new Error("second arg must be public key");return f.fromHex(t).multiply(d(e)).toRawBytes(n)},sign:function(e,n,r=E){const{seed:s,k2sig:i}=$(e,n,r),o=t,a=function(e,t,n){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=co(e),s=co(e),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=(...e)=>n(s,r,...e),c=(e=co(0))=>{s=a(uo([0]),e),r=a(),0!==e.length&&(s=a(uo([1]),e),r=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){r=a();const t=r.slice();n.push(t),e+=r.length}return ro(...n)};return(e,t)=>{let n;for(o(),c(e);!(n=t(u()));)c();return o(),n}}(o.hash.outputLen,o.nByteLength,o.hmac);return a(s,i)},verify:function(e,n,r,s=A){const i=e;n=no("msgHash",n),r=no("publicKey",r);const{lowS:o,prehash:a,format:d}=s;if(Go(s),"strict"in s)throw new Error("options.strict was renamed to lowS");if(void 0!==d&&"compact"!==d&&"der"!==d)throw new Error("format must be compact or der");const l="string"==typeof i||Li(i),h=!l&&!d&&"object"==typeof i&&null!==i&&"bigint"==typeof i.r&&"bigint"==typeof i.s;if(!l&&!h)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let b,p;try{if(h&&(b=new g(i.r,i.s)),l){try{"compact"!==d&&(b=g.fromDER(i))}catch(e){if(!(e instanceof Zo.Err))throw e}b||"der"===d||(b=g.fromCompact(i))}p=f.fromHex(r)}catch(e){return!1}if(!b)return!1;if(o&&b.hasHighS())return!1;a&&(n=t.hash(n));const{r:m,s:y}=b,w=v(n),x=u(y),P=c(w*x),$=c(m*x),E=f.BASE.multiplyAndAddUnsafe(p,P,$)?.toAffine();return!!E&&c(E.x)===m},ProjectivePoint:f,Signature:g,utils:m}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ta(e){return{hash:e,hmac:(t,...n)=>Ri(e,t,function(...e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];o(r),t+=r.length}const n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const s=e[t];n.set(s,r),r+=s.length}return n}(...n)),randomBytes:m}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const na=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ra=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),sa=BigInt(0),ia=BigInt(1),oa=BigInt(2),aa=(e,t)=>(e+t/oa)/t;const ca=ko(na,void 0,void 0,{sqrt:function(e){const t=na,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,f=u*u*e%t,d=Po(f,n,t)*f%t,l=Po(d,n,t)*f%t,h=Po(l,oa,t)*u%t,b=Po(h,s,t)*h%t,p=Po(b,i,t)*b%t,g=Po(p,a,t)*p%t,m=Po(g,c,t)*g%t,y=Po(m,a,t)*p%t,w=Po(y,n,t)*f%t,v=Po(w,o,t)*b%t,x=Po(v,r,t)*u%t,P=Po(x,oa,t);if(!ca.eql(ca.sqr(P),e))throw new Error("Cannot find square root");return P}}),ua=function(e,t){const n=t=>ea({...e,...ta(t)});return{...n(t),create:n}}({a:sa,b:BigInt(7),Fp:ca,n:ra,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=ra,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-ia*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=aa(i*e,t),c=aa(-r*e,t);let u=xo(e-a*n-c*s,t),f=xo(-a*r-c*i,t);const d=u>o,l=f>o;if(d&&(u=t-u),l&&(f=t-f),u>o||f>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:u,k2neg:l,k2:f}}}},ki);var fa=Object.freeze({__proto__:null,secp256k1:ua});function da(e){return{address:e.address,amount:Dt(e.amount),index:Dt(e.index),validatorIndex:Dt(e.validatorIndex)}}const la="0x82ad56cb";class ha extends F{constructor({blockNumber:e,chain:t,contract:n}){super(`Chain "${t.name}" does not support contract "${n.name}".`,{metaMessages:["This could be due to any of the following:",...e&&n.blockCreated&&n.blockCreated>e?[`- The contract "${n.name}" was not deployed until block ${n.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${n.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class ba extends F{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}const pa="/docs/contract/decodeFunctionResult";function ga(e){const{abi:t,args:n,functionName:r,data:s}=e;let i=t[0];if(r){const e=Zs({abi:t,args:n,name:r});if(!e)throw new us(r,{docsPath:pa});i=e}if("function"!==i.type)throw new us(void 0,{docsPath:pa});if(!i.outputs)throw new fs(i.name,{docsPath:pa});const o=Fs(i.outputs,s);return o&&o.length>1?o:o&&1===o.length?o[0]:void 0}class ma extends F{constructor({cause:e,message:t}={}){const n=t?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${n?`with reason: ${n}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(ma,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(ma,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class ya extends F{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${ei(t)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(ya,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class wa extends F{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${ei(t)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(wa,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class va extends F{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(va,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class xa extends F{constructor({cause:e,nonce:t}={}){super([`Nonce provided for the transaction ${t?`(${t}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join("\n"),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(xa,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class Pa extends F{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(Pa,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class $a extends F{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join("\n"),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty($a,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class Ea extends F{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(Ea,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class Aa extends F{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(Aa,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class Ia extends F{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(Ia,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class Ba extends F{constructor({cause:e,maxPriorityFeePerGas:t,maxFeePerGas:n}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${t?` = ${ei(t)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${n?` = ${ei(n)} gwei`:""}).`].join("\n"),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(Ba,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class za extends F{constructor({cause:e}){super(`An error occurred while executing: ${e?.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}class Oa extends F{constructor({body:e,cause:t,details:n,headers:r,status:s,url:i}){super("HTTP request failed.",{cause:t,details:n,metaMessages:[s&&`Status: ${s}`,`URL: ${i}`,e&&`Request body: ${Vs(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=r,this.status=s,this.url=i}}class Sa extends F{constructor({body:e,error:t,url:n}){super("RPC Request failed.",{cause:t,details:t.message,metaMessages:[`URL: ${n}`,`Request body: ${Vs(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t.code,this.data=t.data}}class ka extends F{constructor(e,{code:t,docsPath:n,metaMessages:r,name:s,shortMessage:i}){super(i,{cause:e,docsPath:n,metaMessages:r||e?.metaMessages,name:s||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=s||e.name,this.code=e instanceof Sa?e.code:t??-1}}class Na extends ka{constructor(e){super(e,{code:Na.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}function Ra(e,{docsPath:t,...n}){const r=(()=>{const t=function(e,t){const n=(e.details||"").toLowerCase(),r=e instanceof F?e.walk(e=>e?.code===ma.code):e;return r instanceof F?new ma({cause:e,message:r.details}):ma.nodeMessage.test(n)?new ma({cause:e,message:e.details}):ya.nodeMessage.test(n)?new ya({cause:e,maxFeePerGas:t?.maxFeePerGas}):wa.nodeMessage.test(n)?new wa({cause:e,maxFeePerGas:t?.maxFeePerGas}):va.nodeMessage.test(n)?new va({cause:e,nonce:t?.nonce}):xa.nodeMessage.test(n)?new xa({cause:e,nonce:t?.nonce}):Pa.nodeMessage.test(n)?new Pa({cause:e,nonce:t?.nonce}):$a.nodeMessage.test(n)?new $a({cause:e}):Ea.nodeMessage.test(n)?new Ea({cause:e,gas:t?.gas}):Aa.nodeMessage.test(n)?new Aa({cause:e,gas:t?.gas}):Ia.nodeMessage.test(n)?new Ia({cause:e}):Ba.nodeMessage.test(n)?new Ba({cause:e,maxFeePerGas:t?.maxFeePerGas,maxPriorityFeePerGas:t?.maxPriorityFeePerGas}):new za({cause:e})}(e,n);return t instanceof za?e:t})();return new oi(r,{docsPath:t,...n})}function Ma(e,{format:t}){if(!t)return{};const n={};return function t(r){const s=Object.keys(r);for(const i of s)i in e&&(n[i]=e[i]),r[i]&&"object"==typeof r[i]&&!Array.isArray(r[i])&&t(r[i])}(t(e||{})),n}Object.defineProperty(Na,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});const ja={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function La(e,t){const n={};return void 0!==e.authorizationList&&(n.authorizationList=e.authorizationList.map(e=>({address:e.address,r:e.r?se(BigInt(e.r)):e.r,s:e.s?se(BigInt(e.s)):e.s,chainId:se(e.chainId),nonce:se(e.nonce),...void 0!==e.yParity?{yParity:se(e.yParity)}:{},...void 0!==e.v&&void 0===e.yParity?{v:se(e.v)}:{}}))),void 0!==e.accessList&&(n.accessList=e.accessList),void 0!==e.blobVersionedHashes&&(n.blobVersionedHashes=e.blobVersionedHashes),void 0!==e.blobs&&("string"!=typeof e.blobs[0]?n.blobs=e.blobs.map(e=>re(e)):n.blobs=e.blobs),void 0!==e.data&&(n.data=e.data),e.account&&(n.from=e.account.address),void 0!==e.from&&(n.from=e.from),void 0!==e.gas&&(n.gas=se(e.gas)),void 0!==e.gasPrice&&(n.gasPrice=se(e.gasPrice)),void 0!==e.maxFeePerBlobGas&&(n.maxFeePerBlobGas=se(e.maxFeePerBlobGas)),void 0!==e.maxFeePerGas&&(n.maxFeePerGas=se(e.maxFeePerGas)),void 0!==e.maxPriorityFeePerGas&&(n.maxPriorityFeePerGas=se(e.maxPriorityFeePerGas)),void 0!==e.nonce&&(n.nonce=se(e.nonce)),void 0!==e.to&&(n.to=e.to),void 0!==e.type&&(n.type=ja[e.type]),void 0!==e.value&&(n.value=se(e.value)),n}const Ua=new Map;function Fa({fn:e,id:t,shouldSplitBatch:n,wait:r=0,sort:s}){const i=async()=>{const t=a();o();const n=t.map(({args:e})=>e);0!==n.length&&e(n).then(e=>{s&&Array.isArray(e)&&e.sort(s);for(let n=0;n<t.length;n++){const{resolve:r}=t[n];r?.([e[n],e])}}).catch(e=>{for(let n=0;n<t.length;n++){const{reject:r}=t[n];r?.(e)}})},o=()=>Ua.delete(t),a=()=>Ua.get(t)||[],c=e=>Ua.set(t,[...a(),e]);return{flush:o,async schedule(e){const{promise:t,resolve:s,reject:o}=function(){let e=()=>{},t=()=>{};return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}(),u=n?.([...a().map(({args:e})=>e),e]);u&&i();return a().length>0?(c({args:e,resolve:s,reject:o}),t):(c({args:e,resolve:s,reject:o}),setTimeout(i,r),t)}}}function Ca(e){if(e&&0!==e.length)return e.reduce((e,{slot:t,value:n})=>{if(66!==t.length)throw new q({size:t.length,targetSize:66,type:"hex"});if(66!==n.length)throw new q({size:n.length,targetSize:66,type:"hex"});return e[t]=n,e},{})}function Ta(e){const{balance:t,nonce:n,state:r,stateDiff:s,code:i}=e,o={};if(void 0!==i&&(o.code=i),void 0!==t&&(o.balance=se(t)),void 0!==n&&(o.nonce=se(n)),void 0!==r&&(o.state=Ca(r)),void 0!==s){if(o.state)throw new ni;o.stateDiff=Ca(s)}return o}const Da=2n**256n-1n;async function qa(e,t){const{account:n=e.account,authorizationList:r,batch:s=Boolean(e.batch?.multicall),blockNumber:i,blockTag:o=e.experimental_blockTag??"latest",accessList:a,blobs:c,blockOverrides:u,code:f,data:d,factory:l,factoryData:h,gas:b,gasPrice:p,maxFeePerBlobGas:g,maxFeePerGas:m,maxPriorityFeePerGas:y,nonce:w,to:v,value:x,stateOverride:P,...$}=t,E=n?Zr(n):void 0;if(f&&(l||h))throw new F("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(f&&v)throw new F("Cannot provide both `code` & `to` as parameters.");const A=f&&d,I=l&&h&&v&&d,B=A||I,z=A?_a({code:f,data:d}):I?function(e){const{data:t,factory:n,factoryData:r,to:s}=e;return hi({abi:xt(["constructor(address, bytes, address, bytes)"]),bytecode:Vr,args:[s,t,n,r]})}({data:d,factory:l,factoryData:h,to:v}):d;try{!function(e){const{account:t,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:i}=e,o=t?Zr(t):void 0;if(o&&!Be(o.address))throw new xe({address:o.address});if(i&&!Be(i))throw new xe({address:i});if(void 0!==n&&(void 0!==r||void 0!==s))throw new ii;if(r&&r>Da)throw new ya({maxFeePerGas:r});if(s&&r&&s>r)throw new Ba({maxFeePerGas:r,maxPriorityFeePerGas:s})}(t);const n=("bigint"==typeof i?se(i):void 0)||o,f=u?function(e){return{..."bigint"==typeof e.baseFeePerGas&&{baseFeePerGas:Dt(e.baseFeePerGas)},..."bigint"==typeof e.blobBaseFee&&{blobBaseFee:Dt(e.blobBaseFee)},..."string"==typeof e.feeRecipient&&{feeRecipient:e.feeRecipient},..."bigint"==typeof e.gasLimit&&{gasLimit:Dt(e.gasLimit)},..."bigint"==typeof e.number&&{number:Dt(e.number)},..."bigint"==typeof e.prevRandao&&{prevRandao:Dt(e.prevRandao)},..."bigint"==typeof e.time&&{time:Dt(e.time)},...e.withdrawals&&{withdrawals:e.withdrawals.map(da)}}}(u):void 0,d=function(e){if(!e)return;const t={};for(const{address:n,...r}of e){if(!Be(n,{strict:!1}))throw new xe({address:n});if(t[n])throw new ti({address:n});t[n]=Ta(r)}return t}(P),l=e.chain?.formatters?.transactionRequest?.format,h=(l||La)({...Ma($,{format:l}),accessList:a,account:E,authorizationList:r,blobs:c,data:z,gas:b,gasPrice:p,maxFeePerBlobGas:g,maxFeePerGas:m,maxPriorityFeePerGas:y,nonce:w,to:B?void 0:v,value:x},"call");if(s&&function({request:e}){const{data:t,to:n,...r}=e;return!!t&&(!t.startsWith(la)&&(!!n&&!(Object.values(r).filter(e=>void 0!==e).length>0)))}({request:h})&&!d&&!f)try{return await async function(e,t){const{batchSize:n=1024,deployless:r=!1,wait:s=0}="object"==typeof e.batch?.multicall?e.batch.multicall:{},{blockNumber:i,blockTag:o=e.experimental_blockTag??"latest",data:a,to:c}=t,u=(()=>{if(r)return null;if(t.multicallAddress)return t.multicallAddress;if(e.chain)return function({blockNumber:e,chain:t,contract:n}){const r=t?.contracts?.[n];if(!r)throw new ha({chain:t,contract:{name:n}});if(e&&r.blockCreated&&r.blockCreated>e)throw new ha({blockNumber:e,chain:t,contract:{name:n,blockCreated:r.blockCreated}});return r.address}({blockNumber:i,chain:e.chain,contract:"multicall3"});throw new ba})(),f="bigint"==typeof i?se(i):void 0,d=f||o,{schedule:l}=Fa({id:`${e.uid}.${d}`,wait:s,shouldSplitBatch(e){const t=e.reduce((e,{data:t})=>e+(t.length-2),0);return t>2*n},fn:async t=>{const n=t.map(e=>({allowFailure:!0,callData:e.data,target:e.to})),r=pi({abi:Tr,args:[n],functionName:"aggregate3"}),s=await e.request({method:"eth_call",params:[{...null===u?{data:_a({code:Hr,data:r})}:{to:u,data:r}},d]});return ga({abi:Tr,args:[n],functionName:"aggregate3",data:s||"0x"})}}),[{returnData:h,success:b}]=await l({data:a,to:c});if(!b)throw new di({data:h});return"0x"===h?{data:void 0}:{data:h}}(e,{...h,blockNumber:i,blockTag:o})}catch(e){if(!(e instanceof ba||e instanceof ha))throw e}const A=(()=>{const e=[h,n];return d&&f?[...e,d,f]:d?[...e,d]:f?[...e,{},f]:e})(),I=await e.request({method:"eth_call",params:A});return"0x"===I?{data:void 0}:{data:I}}catch(n){const r=function(e){if(!(e instanceof F))return;const t=e.walk();return"object"==typeof t?.data?t.data?.data:t.data}(n),{offchainLookup:s,offchainLookupSignature:i}=await Promise.resolve().then(function(){return gc});if(!1!==e.ccipRead&&r?.slice(0,10)===i&&v)return{data:await s(e,{data:r,to:v})};if(B&&"0x101bb98d"===r?.slice(0,10))throw new fi({factory:l});throw Ra(n,{...t,account:E,chain:e.chain})}}function _a(e){const{code:t,data:n}=e;return hi({abi:xt(["constructor(bytes, bytes)"]),bytecode:"0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",args:[t,n]})}const Va=3;async function Ga(e,t){const{abi:n,address:r,args:s,functionName:i,...o}=t,a=pi({abi:n,args:s,functionName:i});try{const{data:t}=await $i(e,qa,"call")({...o,data:a,to:r});return ga({abi:n,args:s,functionName:i,data:t||"0x"})}catch(e){throw function(e,{abi:t,address:n,args:r,docsPath:s,functionName:i,sender:o}){const a=e instanceof di?e:e instanceof F?e.walk(e=>"data"in e)||e.walk():{},{code:c,data:u,details:f,message:d,shortMessage:l}=a,h=e instanceof ns?new ui({functionName:i}):[Va,Na.code].includes(c)&&(u||f||d||l)?new ci({abi:t,data:"object"==typeof u?u.data:u,functionName:i,message:a instanceof Sa?f:l??d}):e;return new ai(h,{abi:t,args:r,contractAddress:n,docsPath:s,functionName:i,sender:o})}(e,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:i})}}async function Ha(e,t){const{address:n,hash:r,erc6492VerifierAddress:s=t.universalSignatureVerifierAddress??e.chain?.contracts?.erc6492Verifier?.address,multicallAddress:i=t.multicallAddress??e.chain?.contracts?.multicall3?.address}=t,o=(()=>{const e=t.signature;return M(e)?e:"object"==typeof e&&"r"in e&&"s"in e?function({r:e,s:t,to:n="hex",v:r,yParity:s}){const i=(()=>{if(0===s||1===s)return s;if(r&&(27n===r||28n===r||r>=35n))return r%2n==0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),o=`0x${new ua.Signature(J(e),J(t)).toCompactHex()}${0===i?"1b":"1c"}`;return"hex"===n?o:de(o)}(e):re(e)})();try{return function(e){try{return Fr(e),!0}catch{return!1}}(o)?await async function(e,t){const{address:n,blockNumber:r,blockTag:s,hash:i,multicallAddress:o}=t,{authorization:a,data:c,signature:u,to:f}=function(e){Fr(e);const t=Wt(Gt(e,-64,-32)),n=Gt(e,-t-64,-64),r=Gt(e,0,-t-64),[s,i,o]=lr(Ur,n);return{authorization:Lr({address:s.delegation,chainId:Number(s.chainId),nonce:s.nonce,yParity:s.yParity,r:s.r,s:s.s}),signature:r,...o&&"0x"!==o?{data:o,to:i}:{}}}(t.signature),d=await async function(e,{address:t,blockNumber:n,blockTag:r="latest"}){const s=void 0!==n?se(n):void 0,i=await e.request({method:"eth_getCode",params:[t,s||r]},{dedupe:Boolean(s)});if("0x"!==i)return i}(e,{address:n,blockNumber:r,blockTag:s});if(d===pe(["0xef0100",a.address]))return await async function(e,t){const{address:n,blockNumber:r,blockTag:s,hash:i,signature:o}=t,a=await $i(e,Ga,"readContract")({address:n,abi:qr,args:[i,o],blockNumber:r,blockTag:s,functionName:"isValidSignature"}).catch(e=>{if(e instanceof ai)throw new Za;throw e});if(a.startsWith("0x1626ba7e"))return!0;throw new Za}(e,{address:n,blockNumber:r,blockTag:s,hash:i,signature:u});const l={address:a.address,chainId:Number(a.chainId),nonce:Number(a.nonce),r:se(a.r,{size:32}),s:se(a.s,{size:32}),yParity:a.yParity},h=await Pi({address:n,authorization:l});if(!h)throw new Za;const b=await $i(e,Ga,"readContract")({...o?{address:o}:{code:Hr},authorizationList:[l],abi:Tr,blockNumber:r,blockTag:"pending",functionName:"aggregate3",args:[[...c?[{allowFailure:!0,target:f??n,callData:c}]:[],{allowFailure:!0,target:n,callData:pi({abi:qr,functionName:"isValidSignature",args:[i,u]})}]]}),p=b[b.length-1]?.returnData;if(p?.startsWith("0x1626ba7e"))return!0;throw new Za}(e,{...t,multicallAddress:i,signature:o}):await async function(e,t){const{address:n,factory:r,factoryData:s,hash:i,signature:o,verifierAddress:a,...c}=t,u=await(async()=>r||s?Er(o)?o:function(e){const{data:t,signature:n,to:r}=e;return Ft(hr(pr("address, bytes, bytes"),[r,t,n]),$r)}({data:s,signature:o,to:r}):o)(),f=a?{to:a,data:pi({abi:_r,functionName:"isValidSig",args:[n,i,u]}),...c}:{data:hi({abi:_r,args:[n,i,u],bytecode:Gr}),...c},{data:d}=await $i(e,qa,"call")(f).catch(e=>{if(e instanceof oi)throw new Za;throw e});if(function(e,t={}){let n=e;if(t.size&&(X(n,{size:t.size}),n=K(n)),"0x00"===K(n))return!1;if("0x01"===K(n))return!0;throw new Z(n)}(d??"0x0"))return!0;throw new Za}(e,{...t,verifierAddress:s,signature:o})}catch(e){try{if(ze(Ee(n),await mi({hash:r,signature:o})))return!0}catch{}if(e instanceof Za)return!1;throw e}}class Za extends Error{}async function Wa(e,t){const{address:n,domain:r,message:s,nonce:i,scheme:o,signature:a,time:c=new Date,...u}=t,f=me(s);if(!f.address)return!1;if(!Oe({address:n,domain:r,message:f,nonce:i,scheme:o,time:c}))return!1;const d=ge(s);return Ha(e,{address:f.address,hash:d,signature:a,...u})}class Ya extends F{constructor(e){const{docsPath:t,field:n,metaMessages:r}=e;super(`Invalid Sign-In with Ethereum message field "${n}".`,{docsPath:t,metaMessages:r,name:"SiweInvalidMessageFieldError"})}}function Ka(e){if(/[^a-z0-9:/?#[\]@!$&'()*+,;=.\-_~%]/i.test(e))return!1;if(/%[^0-9a-f]/i.test(e))return!1;if(/%[0-9a-f](:?[^0-9a-f]|$)/i.test(e))return!1;const t=function(e){return e.match(/(?:([^:/?#]+):)?(?:\/\/([^/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/)}(e),n=t[1],r=t[2],s=t[3],i=t[4],o=t[5];if(!(n?.length&&s.length>=0))return!1;if(r?.length){if(0!==s.length&&!/^\//.test(s))return!1}else if(/^\/\//.test(s))return!1;if(!/^[a-z][a-z0-9+\-.]*$/.test(n.toLowerCase()))return!1;let a="";return a+=`${n}:`,r?.length&&(a+=`//${r}`),a+=s,i?.length&&(a+=`?${i}`),o?.length&&(a+=`#${o}`),a}function Xa(e){const{chainId:t,domain:n,expirationTime:r,issuedAt:s=new Date,nonce:i,notBefore:o,requestId:a,resources:c,scheme:u,uri:f,version:d}=e;{if(t!==Math.floor(t))throw new Ya({field:"chainId",metaMessages:["- Chain ID must be a EIP-155 chain ID.","- See https://eips.ethereum.org/EIPS/eip-155","",`Provided value: ${t}`]});if(!(Ja.test(n)||Qa.test(n)||ec.test(n)))throw new Ya({field:"domain",metaMessages:["- Domain must be an RFC 3986 authority.","- See https://www.rfc-editor.org/rfc/rfc3986","",`Provided value: ${n}`]});if(!tc.test(i))throw new Ya({field:"nonce",metaMessages:["- Nonce must be at least 8 characters.","- Nonce must be alphanumeric.","",`Provided value: ${i}`]});if(!Ka(f))throw new Ya({field:"uri",metaMessages:["- URI must be a RFC 3986 URI referring to the resource that is the subject of the signing.","- See https://www.rfc-editor.org/rfc/rfc3986","",`Provided value: ${f}`]});if("1"!==d)throw new Ya({field:"version",metaMessages:["- Version must be '1'.","",`Provided value: ${d}`]});if(u&&!nc.test(u))throw new Ya({field:"scheme",metaMessages:["- Scheme must be an RFC 3986 URI scheme.","- See https://www.rfc-editor.org/rfc/rfc3986#section-3.1","",`Provided value: ${u}`]});const r=e.statement;if(r?.includes("\n"))throw new Ya({field:"statement",metaMessages:["- Statement must not include '\\n'.","",`Provided value: ${r}`]})}const l=Ee(e.address),h=`${u?`${u}://${n}`:n} wants you to sign in with your Ethereum account:\n${l}\n\n${e.statement?`${e.statement}\n`:""}`;let b=`URI: ${f}\nVersion: ${d}\nChain ID: ${t}\nNonce: ${i}\nIssued At: ${s.toISOString()}`;if(r&&(b+=`\nExpiration Time: ${r.toISOString()}`),o&&(b+=`\nNot Before: ${o.toISOString()}`),a&&(b+=`\nRequest ID: ${a}`),c){let e="\nResources:";for(const t of c){if(!Ka(t))throw new Ya({field:"resources",metaMessages:["- Every resource must be a RFC 3986 URI.","- See https://www.rfc-editor.org/rfc/rfc3986","",`Provided value: ${t}`]});e+=`\n- ${t}`}b+=e}return`${h}\n${b}`}const Ja=/^([a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}(:[0-9]{1,5})?$/,Qa=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(:[0-9]{1,5})?$/,ec=/^localhost(:[0-9]{1,5})?$/,tc=/^[a-zA-Z0-9]{8,}$/,nc=/^([a-zA-Z][a-zA-Z0-9+-.]*)$/;let rc,sc=256;function ic(){return function(e=11){if(!rc||sc+e>512){rc="",sc=0;for(let e=0;e<256;e++)rc+=(256+256*Math.random()|0).toString(16).substring(1)}return rc.substring(sc,sc+++e)}(96)}class oc extends F{constructor({callbackSelector:e,cause:t,data:n,extraData:r,sender:s,urls:i}){super(t.shortMessage||"An error occurred while fetching for an offchain result.",{cause:t,metaMessages:[...t.metaMessages||[],t.metaMessages?.length?"":[],"Offchain Gateway Call:",i&&["  Gateway URL(s):",...i.map(e=>`    ${e}`)],`  Sender: ${s}`,`  Data: ${n}`,`  Callback selector: ${e}`,`  Extra data: ${r}`].flat(),name:"OffchainLookupError"})}}class ac extends F{constructor({result:e,url:t}){super("Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:[`Gateway URL: ${t}`,`Response: ${Vs(e)}`],name:"OffchainLookupResponseMalformedError"})}}class cc extends F{constructor({sender:e,to:t}){super("Reverted sender address does not match target contract address (`to`).",{metaMessages:[`Contract address: ${t}`,`OffchainLookup sender address: ${e}`],name:"OffchainLookupSenderMismatchError"})}}const uc="/docs/contract/encodeErrorResult";function fc(e){const{abi:t,errorName:n,args:r}=e;let s=t[0];if(n){const e=Zs({abi:t,args:r,name:n});if(!e)throw new as(n,{docsPath:uc});s=e}if("error"!==s.type)throw new as(void 0,{docsPath:uc});const i=Xr(s),o=Es(i);let a="0x";if(r&&r.length>0){if(!s.inputs)throw new os(s.name,{docsPath:uc});a=Ms(s.inputs,r)}return pe([o,a])}const dc="/docs/contract/encodeFunctionResult";const lc="x-batch-gateway:true";async function hc(e){const{data:t,ccipRequest:n}=e,{args:[r]}=function(e){const{abi:t,data:n}=e,r=ms(n,0,4),s=t.find(e=>"function"===e.type&&r===Es(Xr(e)));if(!s)throw new ds(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?Fs(s.inputs,ms(n,4)):void 0}}({abi:Dr,data:t}),s=[],i=[];return await Promise.all(r.map(async(e,t)=>{try{i[t]=e.urls.includes(lc)?await hc({data:e.data,ccipRequest:n}):await n(e),s[t]=!1}catch(e){s[t]=!0,i[t]="HttpRequestError"===(r=e).name&&r.status?fc({abi:Dr,errorName:"HttpError",args:[r.status,r.shortMessage]}):fc({abi:[Yr],errorName:"Error",args:["shortMessage"in r?r.shortMessage:r.message]})}var r})),function(e){const{abi:t,functionName:n,result:r}=e;let s=t[0];if(n){const e=Zs({abi:t,name:n});if(!e)throw new us(n,{docsPath:dc});s=e}if("function"!==s.type)throw new us(void 0,{docsPath:dc});if(!s.outputs)throw new fs(s.name,{docsPath:dc});const i=(()=>{if(0===s.outputs.length)return[];if(1===s.outputs.length)return[r];if(Array.isArray(r))return r;throw new ps(r)})();return Ms(s.outputs,i)}({abi:Dr,functionName:"query",result:[s,i]})}const bc={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]};async function pc({data:e,sender:t,urls:n}){let r=new Error("An unknown error occurred.");for(let s=0;s<n.length;s++){const i=n[s],o=i.includes("{data}")?"GET":"POST",a="POST"===o?{data:e,sender:t}:void 0,c="POST"===o?{"Content-Type":"application/json"}:{};try{const n=await fetch(i.replace("{sender}",t.toLowerCase()).replace("{data}",e),{body:JSON.stringify(a),headers:c,method:o});let s;if(s=n.headers.get("Content-Type")?.startsWith("application/json")?(await n.json()).data:await n.text(),!n.ok){r=new Oa({body:a,details:s?.error?Vs(s.error):n.statusText,headers:n.headers,status:n.status,url:i});continue}if(!M(s)){r=new ac({result:s,url:i});continue}return s}catch(e){r=new Oa({body:a,details:e.message,url:i})}}throw r}var gc=Object.freeze({__proto__:null,ccipRequest:pc,offchainLookup:async function(e,{blockNumber:t,blockTag:n,data:r,to:s}){const{args:i}=_s({data:r,abi:[bc]}),[o,a,c,u,f]=i,{ccipRead:d}=e,l=d&&"function"==typeof d?.request?d.request:pc;try{if(!ze(s,o))throw new cc({sender:o,to:s});const r=a.includes(lc)?await hc({data:c,ccipRequest:l}):await l({data:c,sender:o,urls:a}),{data:i}=await qa(e,{blockNumber:t,blockTag:n,data:be([u,Ms([{type:"bytes"},{type:"bytes"}],[r,f])]),to:s});return i}catch(e){throw new oc({callbackSelector:u,cause:e,data:r,extraData:f,sender:o,urls:a})}},offchainLookupAbiItem:bc,offchainLookupSignature:"0x556f1830"});export{Ya as SiweInvalidMessageFieldError,Xa as createSiweMessage,ic as generateSiweNonce,me as parseSiweMessage,Oe as validateSiweMessage,Wa as verifySiweMessage};
